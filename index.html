<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nekta - Kothagudem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
        * { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-sizing: border-box; }
        body { background-color: #f3f4f6; font-family: 'Segoe UI', sans-serif; transition: background-color 0.3s ease; margin: 0; padding: 0; overflow-x: hidden; }
        .app-container { 
            max-width: 480px; 
            margin: 0 auto; 
            background: #fafafa; 
            min-height: 100vh; 
            position: relative; 
            box-shadow: 0 0 20px rgba(0,0,0,0.1); 
            transition: box-shadow 0.3s ease;
            width: 100%;
        }
        
        /* Enhanced responsive breakpoints */
        @media (max-width: 320px) {
            .app-container { padding: 0 8px; }
            .text-xs { font-size: 10px; }
            .text-sm { font-size: 12px; }
        }
        
        @media (min-width: 481px) and (max-width: 768px) {
            .app-container { max-width: 600px; }
        }
        
        @media (min-width: 769px) {
            .app-container { max-width: 480px; }
        }
        
        /* Touch-friendly sizing */
        @media (pointer: coarse) {
            button, .order-btn { min-height: 44px; }
            input, textarea, select { min-height: 44px; }
        }
        .hide { display: none !important; }
        .sticky-bottom-nav { 
            position: fixed; 
            bottom: 0; 
            left: 50%; 
            transform: translateX(-50%);
            width: 100%; 
            max-width: 480px; 
            z-index: 50; 
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); 
            backdrop-filter: blur(20px); 
            border-top: 1px solid rgba(16, 185, 129, 0.1); 
            padding: 4px 0 max(8px, env(safe-area-inset-bottom)); 
            box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.08); 
            border-top-left-radius: 28px; 
            border-top-right-radius: 28px; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Safe area support for iOS */
        @supports (padding: max(0px)) {
            .sticky-bottom-nav {
                padding-bottom: max(8px, env(safe-area-inset-bottom));
            }
        }


        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        
        /* Improved touch scrolling */
        .scrollbar-hide {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
        
        /* Responsive grid adjustments */
        @media (max-width: 320px) {
            .grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        @media (min-width: 481px) and (max-width: 768px) {
            .grid-cols-3 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }
        .nav-item { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); transform: scale(1); position: relative; }
        .nav-item.active { color: #10B981; transform: scale(1.05); }
        .nav-item:hover { transform: scale(1.02); }
        .nav-icon { width: 38px; height: 38px; margin-bottom: 1px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); border: 2px solid transparent; }
        .nav-item.active .nav-icon { transform: translateY(-3px); border-color: #10B981; box-shadow: 0 8px 25px rgba(16, 185, 129, 0.25); }
        .nav-item span { font-size: 9px; font-weight: 600; letter-spacing: 0.5px; } 
        #view-cart { padding-bottom: max(8.5rem, calc(8.5rem + env(safe-area-inset-bottom))); }
        
        #view-home { padding-top: 96px; }
        
        /* Responsive padding adjustments */
        @media (max-width: 320px) {
            #view-cart { padding-bottom: 8rem; }
        }
        
        @media (min-width: 481px) {
        }
        .order-btn { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: scale(1); }
        .order-btn:hover { background-color: #10B981; transform: scale(1.02); box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
        .order-btn:active { background-color: #059669; transform: scale(0.98); }
        .image-placeholder { background-color: #e5ffe5; border: 1px dashed #a7f3d0; color: #10B981; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; text-align: center; transition: all 0.3s ease; }
        .category-btn { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: scale(1); }
        .category-btn:hover { transform: scale(1.05); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .category-btn:active { transform: scale(0.95); }
        input, textarea, select, button { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        input:focus, textarea:focus, select:focus { transform: scale(1.02); box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1); }
        .bg-white { transition: all 0.3s ease; }
        .bg-white:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-1px); }
        /* Error overlay */
        .error-overlay { position: fixed; inset: 12px; z-index: 9999; background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; }
        .error-box { background: white; color: #111827; max-width: 720px; width: 100%; padding: 16px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        .error-box pre { max-height: 300px; overflow: auto; background: #111827; color: #f8fafc; padding: 12px; border-radius: 8px; }
        
        /* Payment Modal Styles */
        .payment-option input[type="radio"]:checked + .payment-card {
            border-color: #10b981;
            background-color: #f0fdf4;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
        }
        
        .payment-option input[type="radio"]:checked + .payment-card .radio-indicator {
            border-color: #10b981;
        }
        
        .payment-option input[type="radio"]:checked + .payment-card .radio-indicator div {
            opacity: 1;
            background-color: #10b981;
        }
        
        #payment-modal.show #payment-modal-content {
            transform: scale(1);
            opacity: 1;
        }
        
        /* Line clamp utility for product names */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Enhanced shadow for start shopping button */
        .shadow-3xl {
            box-shadow: 0 25px 50px -12px rgba(16, 185, 129, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive text scaling */
        @media (max-width: 320px) {
            .text-6xl { font-size: 3rem; }
            .text-4xl { font-size: 2rem; }
            .text-3xl { font-size: 1.5rem; }
            .text-2xl { font-size: 1.25rem; }
            .text-xl { font-size: 1.125rem; }
        }
        
        /* Landscape orientation adjustments */
        @media (orientation: landscape) and (max-height: 500px) {
            .h-28 { height: 5rem; }
            .py-6 { padding-top: 1rem; padding-bottom: 1rem; }
        }
        
        /* High DPI display optimizations */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .border { border-width: 0.5px; }
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            body { background-color: #1f2937; }
            .app-container { background: #374151; }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Gradient text animation */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .animate-gradient {
            background-size: 200% 200%;
            animation: gradient-shift 3s ease infinite;
        }
        
        /* Loading Screen Animations */
        @keyframes float1 {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.7; }
            50% { transform: translateY(-20px) scale(1.2); opacity: 1; }
        }
        
        @keyframes float2 {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.6; }
            50% { transform: translateY(-15px) rotate(180deg); opacity: 1; }
        }
        
        @keyframes float3 {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0.5; }
            33% { transform: translateY(-10px) translateX(10px); opacity: 0.8; }
            66% { transform: translateY(-18px) translateX(-5px); opacity: 1; }
        }
        
        @keyframes brandPulse {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        @keyframes logoAppear {
            0% { opacity: 0; transform: scale(0.5) rotateY(180deg); }
            50% { opacity: 0.7; transform: scale(1.1) rotateY(0deg); }
            100% { opacity: 1; transform: scale(1) rotateY(0deg); }
        }
        
        @keyframes spinnerAppear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes textAppear {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        /* Floating Vegetables Animations */
        @keyframes vegFloat1 {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(10deg); }
        }
        
        @keyframes vegFloat2 {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            50% { transform: translateY(-20px) rotate(-8deg) scale(1.1); }
        }
        
        @keyframes vegFloat3 {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(5deg); }
            66% { transform: translateY(-18px) rotate(-5deg); }
        }
    </style>
</head>
<body onload="checkSavedDetails()">

<div class="app-container relative">
    
    <!-- LOADING VIEW -->
    <div id="view-loading" class="absolute inset-0 z-50 bg-gradient-to-br from-green-600 to-emerald-700 flex flex-col items-center justify-center p-6 text-white overflow-hidden">
        <!-- Loading Animation with Brand Name -->
        <div class="relative w-full h-32 mb-8 flex flex-col items-center justify-center">
            <!-- Nekta Brand Name -->
            <div class="text-6xl font-black text-white mb-3 tracking-wider" style="font-family: 'Arial Black', sans-serif; text-shadow: 0 4px 20px rgba(0,0,0,0.3); animation: brandPulse 2s ease-in-out infinite;">
                Nekta
            </div>
            
            <!-- Brand Motto -->
            <div class="text-lg font-semibold text-green-100 mb-2 text-center px-4" style="text-shadow: 0 2px 10px rgba(0,0,0,0.2); animation: textAppear 1s ease-out 0.5s both;">
                "Fresh to Your Home in 30 Minutes"
            </div>
            
            <!-- Brand Slogan -->
            <div class="text-sm font-medium text-white mb-6 text-center px-4 opacity-90" style="text-shadow: 0 1px 6px rgba(0,0,0,0.3); animation: textAppear 1s ease-out 0.7s both;">
                Quick ‚Ä¢ Fresh ‚Ä¢ Essential
            </div>
            
            <!-- Animated Loading Dots -->
            <div class="flex items-center gap-2">
                <div class="w-3 h-3 bg-white rounded-full animate-bounce" style="animation-delay: 0s;"></div>
                <div class="w-3 h-3 bg-green-300 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                <div class="w-3 h-3 bg-emerald-300 rounded-full animate-bounce" style="animation-delay: 0.4s;"></div>
                <div class="w-3 h-3 bg-white rounded-full animate-bounce" style="animation-delay: 0.6s;"></div>
                <div class="w-3 h-3 bg-green-300 rounded-full animate-bounce" style="animation-delay: 0.8s;"></div>
            </div>
            
            <!-- Floating Particles -->
            <div class="absolute top-2 left-1/4 w-2 h-2 bg-white bg-opacity-60 rounded-full" style="animation: float1 3s ease-in-out infinite;"></div>
            <div class="absolute top-6 right-1/4 w-2 h-2 bg-green-200 rounded-full" style="animation: float2 2.5s ease-in-out infinite;"></div>
            <div class="absolute bottom-4 left-1/3 w-2 h-2 bg-emerald-200 rounded-full" style="animation: float3 3.5s ease-in-out infinite;"></div>
            <div class="absolute bottom-2 right-1/3 w-2 h-2 bg-white bg-opacity-50 rounded-full" style="animation: float1 2.8s ease-in-out infinite;"></div>
        </div>
        


    </div>

    <!-- CUSTOMER DETAILS VIEW -->
    <div id="view-details" class="absolute inset-0 z-50 bg-gradient-to-br from-purple-600 via-blue-600 to-green-600 flex flex-col items-center justify-center p-4 text-white hide overflow-y-auto">
        <!-- Animated Background -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute top-10 left-10 w-20 h-20 bg-white bg-opacity-10 rounded-full animate-bounce"></div>
            <div class="absolute top-32 right-16 w-16 h-16 bg-yellow-300 bg-opacity-20 rounded-full animate-pulse"></div>
            <div class="absolute bottom-20 left-20 w-12 h-12 bg-pink-300 bg-opacity-15 rounded-full animate-ping"></div>
        </div>
        
        <div class="relative z-10 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="text-8xl mb-4 animate-bounce">üõí</div>
                <h1 class="text-4xl font-bold mb-3 bg-gradient-to-r from-yellow-300 to-pink-300 bg-clip-text text-transparent">Hey There!</h1>
                <p class="text-lg text-blue-100 mb-2">Welcome to Nekta Family üéâ</p>
                <p class="text-sm text-blue-200">Let's get you set up for amazing grocery shopping!</p>
            </div>

            <div class="bg-white bg-opacity-95 backdrop-blur-sm p-6 rounded-3xl shadow-2xl">
                <div class="flex justify-center mb-6">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm">1</div>
                        <div class="w-12 h-1 bg-green-500 rounded"></div>
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold text-sm">2</div>
                    </div>
                </div>
                
                <h2 class="text-2xl font-bold text-gray-800 mb-2 text-center">Create Your Profile</h2>
                <p class="text-gray-600 text-center mb-6 text-sm">Just a few details to personalize your experience</p>
                
                <div class="space-y-4">
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="initialName" placeholder="Your Full Name" autocomplete="off" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all text-gray-800 placeholder-gray-500">
                    </div>
                    
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-phone text-gray-400"></i>
                        </div>
                        <input type="tel" id="initialPhone" placeholder="Phone Number (10 digits)" autocomplete="off" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all text-gray-800 placeholder-gray-500">
                    </div>
                    
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-envelope text-gray-400"></i>
                        </div>
                        <input type="email" id="initialEmail" placeholder="Email (Optional)" autocomplete="off" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all text-gray-800 placeholder-gray-500">
                    </div>
                    
                    <div class="relative">
                        <div class="absolute top-3 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-map-marker-alt text-gray-400"></i>
                        </div>
                        <textarea id="initialAddress" placeholder="Your Address (We'll confirm exact location during delivery)" rows="3" autocomplete="off" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all resize-none text-gray-800 placeholder-gray-500"></textarea>
                    </div>
                </div>
                
                <button onclick="showProfileConfirmation()" class="w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-4 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all transform hover:scale-105 shadow-lg flex items-center justify-center gap-2">
                    <span>Continue</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                
                <p id="detailsError" class="text-red-500 text-center mt-3 text-sm hide font-medium">Please fill in all required fields correctly.</p>
                
                <div class="mt-6 flex justify-center items-center gap-4 text-xs text-gray-500">
                    <div class="flex items-center gap-1">
                        <i class="fas fa-shield-alt text-green-500"></i>
                        <span>Secure</span>
                    </div>
                    <div class="flex items-center gap-1">
                        <i class="fas fa-clock text-blue-500"></i>
                        <span>30min delivery</span>
                    </div>
                    <div class="flex items-center gap-1">
                        <i class="fas fa-leaf text-green-500"></i>
                        <span>Fresh</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PROFILE CONFIRMATION VIEW -->
    <div id="view-confirmation" class="absolute inset-0 z-50 bg-gradient-to-br from-green-600 to-emerald-700 flex flex-col p-4 text-white hide overflow-y-auto">

        
        <div class="relative z-10 max-w-md mx-auto w-full">
            <!-- Success Header -->
            <div class="text-center mb-6 mt-8">
                <div class="relative mb-6">
                    <!-- Animated success badge -->
                    <div class="w-24 h-24 bg-gradient-to-br from-white to-green-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-2xl border-4 border-white border-opacity-30 animate-pulse">
                        <div class="w-16 h-16 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Floating particles -->
                    <div class="absolute -top-2 -left-2 w-3 h-3 bg-yellow-300 rounded-full animate-bounce" style="animation-delay: 0.5s"></div>
                    <div class="absolute -top-1 -right-3 w-2 h-2 bg-pink-300 rounded-full animate-ping" style="animation-delay: 1s"></div>
                    <div class="absolute -bottom-1 -left-1 w-2 h-2 bg-blue-300 rounded-full animate-pulse" style="animation-delay: 1.5s"></div>
                </div>
                <h1 class="text-3xl font-bold mb-3 text-white drop-shadow-lg leading-tight" id="welcomeGreeting">Hello, Vijay! Welcome to Nekta!</h1>
                <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl p-4 border border-white border-opacity-30">
                    <p class="text-white text-sm font-medium mb-2">üéâ Profile Setup Complete!</p>
                    <p class="text-green-100 text-xs">Ready to explore 500+ fresh products with 30-min delivery</p>
                </div>
            </div>

            <!-- Business Offers Section -->
            <div class="bg-gradient-to-r from-red-500 to-pink-600 rounded-2xl p-4 mb-4 shadow-xl border border-red-300">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-bold flex items-center gap-2">
                        <span class="text-2xl">üî•</span> MEGA OFFERS
                    </h3>
                    <div class="bg-yellow-400 text-red-800 px-2 py-1 rounded-full text-xs font-black">LIMITED TIME</div>
                </div>
                <div class="grid grid-cols-2 gap-3 text-sm">
                    <div class="bg-white bg-opacity-20 rounded-lg p-2 text-center">
                        <div class="text-2xl font-black text-yellow-300">50%</div>
                        <div class="text-xs">OFF on First Order</div>
                    </div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-2 text-center">
                        <div class="text-2xl font-black text-green-300">FREE</div>
                        <div class="text-xs">Delivery Today</div>
                    </div>
                </div>
            </div>

            <!-- Regular Packs Alert -->
            <div class="bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-4 mb-4 shadow-xl border border-blue-300">
                <div class="flex items-center gap-2 mb-3">
                    <span class="text-2xl">üì¶</span>
                    <h3 class="text-lg font-bold">BUNDLE PACKS AVAILABLE</h3>
                </div>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between items-center bg-white bg-opacity-15 rounded-lg p-2">
                        <span>Daily Essentials Bundle</span>
                        <span class="bg-green-400 text-green-900 px-2 py-1 rounded-full text-xs font-bold">Save ‚Çπ81</span>
                    </div>
                    <div class="flex justify-between items-center bg-white bg-opacity-15 rounded-lg p-2">
                        <span>Weekly Grocery Pack</span>
                        <span class="bg-orange-400 text-orange-900 px-2 py-1 rounded-full text-xs font-bold">Save ‚Çπ221</span>
                    </div>
                </div>
            </div>



            <!-- What's Next Section -->
            <div class="bg-gradient-to-r from-green-600 to-teal-600 rounded-2xl p-4 mb-6 shadow-xl">
                <h3 class="font-bold mb-3 text-center flex items-center justify-center gap-2">
                    <span class="text-xl">üöÄ</span> What's Waiting For You
                </h3>
                <div class="grid grid-cols-2 gap-2 text-xs">
                    <div class="flex items-center gap-2 bg-white bg-opacity-20 rounded-lg p-2">
                        <span class="text-lg">üõí</span>
                        <span>500+ Products</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white bg-opacity-20 rounded-lg p-2">
                        <span class="text-lg">‚ö°</span>
                        <span>30min Delivery</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white bg-opacity-20 rounded-lg p-2">
                        <span class="text-lg">ü•¨</span>
                        <span>Fresh Quality</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white bg-opacity-20 rounded-lg p-2">
                        <span class="text-lg">üí∞</span>
                        <span>Best Prices</span>
                    </div>
                </div>
            </div>
            
            <!-- Start Shopping Button -->
            <div class="space-y-3 mb-8">
                <button onclick="confirmAndStartShopping()" class="group relative w-full bg-gradient-to-r from-green-600 via-emerald-600 to-emerald-700 text-white font-bold py-6 rounded-3xl shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-300 overflow-hidden">
                    <!-- Animated background shine -->
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 group-hover:opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-all duration-700"></div>
                    
                    <div class="relative flex items-center justify-center gap-4">
                        <div class="w-12 h-12 bg-white bg-opacity-25 rounded-2xl flex items-center justify-center backdrop-blur-sm border border-white border-opacity-30 group-hover:rotate-12 transition-transform duration-300">
                            <i class="fas fa-shopping-cart text-2xl group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-black tracking-wider mb-1">START SHOPPING</div>
                            <div class="text-sm font-medium opacity-90">üéâ 500+ Fresh Products Available</div>
                        </div>
                        <div class="w-12 h-12 bg-white bg-opacity-25 rounded-2xl flex items-center justify-center backdrop-blur-sm border border-white border-opacity-30 group-hover:-rotate-12 transition-transform duration-300">
                            <i class="fas fa-rocket text-2xl group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                    </div>
                    
                    <!-- Pulse effect -->
                    <div class="absolute inset-0 rounded-3xl bg-white opacity-0 group-hover:opacity-10 group-hover:animate-pulse"></div>
                </button>
                
                <button onclick="editProfile()" class="w-full bg-white bg-opacity-10 backdrop-blur-sm border-2 border-white border-opacity-30 text-white font-medium py-3 rounded-xl hover:bg-white hover:bg-opacity-20 transition-all flex items-center justify-center gap-2">
                    <i class="fas fa-edit"></i>
                    <span>Edit Profile</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- HOME VIEW -->
    <div id="view-home" class="hide pb-32">
        <div id="floatingHeader" class="fixed top-0 left-0 right-0 z-30 max-w-[480px] mx-auto transition-transform duration-300">
            <div class="relative bg-gradient-to-br from-green-600 to-emerald-700 backdrop-blur-xl shadow-2xl text-white overflow-hidden">
                <!-- Floating Particles -->
                <div class="absolute inset-0 overflow-hidden">
                    <div class="absolute top-2 left-1/4 w-2 h-2 bg-white bg-opacity-60 rounded-full" style="animation: float1 3s ease-in-out infinite;"></div>
                    <div class="absolute top-6 right-1/4 w-2 h-2 bg-green-200 rounded-full" style="animation: float2 2.5s ease-in-out infinite;"></div>
                    <div class="absolute bottom-4 left-1/3 w-2 h-2 bg-emerald-200 rounded-full" style="animation: float3 3.5s ease-in-out infinite;"></div>
                    <div class="absolute bottom-2 right-1/3 w-2 h-2 bg-white bg-opacity-50 rounded-full" style="animation: float1 2.8s ease-in-out infinite;"></div>
                </div>
                
                <!-- Modern Header Content -->
                <div class="relative px-4 py-4">
                    <!-- Single Row Layout -->
                    <div class="flex items-center justify-between">
                        <!-- Left: Brand & Location -->
                        <div class="flex items-center gap-4">
                            <!-- Brand -->
                            <div onclick="adminTapCounter()" class="cursor-pointer group">
                                <div class="text-white font-black text-2xl tracking-wide group-hover:scale-105 transition-all duration-300" style="font-family: 'Arial Black', sans-serif; text-shadow: 0 2px 8px rgba(0,0,0,0.3);">
                                    Nekta
                                </div>
                            </div>
                            
                            <!-- Location Pill -->
                            <div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/20">
                                <i class="fas fa-map-marker-alt text-green-300 text-xs"></i>
                                <span class="text-white text-xs font-medium">Kothagudem</span>
                                <i class="fas fa-chevron-down text-white/60 text-xs" onclick="showStoreSelector()"></i>
                            </div>
                        </div>
                        
                        <!-- Right: Actions -->
                        <div class="flex items-center gap-2">
                            <!-- Delivery Status -->
                            <div class="flex items-center gap-1.5 bg-green-500/20 backdrop-blur-sm px-2.5 py-1.5 rounded-full border border-green-400/30">
                                <div class="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></div>
                                <span class="text-green-200 font-medium text-xs">30min</span>
                            </div>
                            
                            <!-- Cart -->
                            <div class="relative">
                                <div class="w-11 h-11 bg-white/15 backdrop-blur-sm rounded-full flex items-center justify-center cursor-pointer hover:bg-white/25 transition-all duration-300 border border-white/20" onclick="showCart()">
                                    <i class="fas fa-shopping-bag text-white text-base"></i>
                                    <span id="headerCartBadge" class="hide absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-lg">0</span>
                                </div>
                            </div>
                            
                            <!-- Profile -->
                            <div class="relative">
                                <div class="w-11 h-11 bg-white/15 backdrop-blur-sm rounded-full flex items-center justify-center cursor-pointer hover:bg-white/25 transition-all duration-300 border border-white/20" onclick="showProfile()">
                                    <i class="fas fa-user text-white text-base"></i>
                                    <div class="absolute -top-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border border-white"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Accent Line -->
                <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-400 via-emerald-400 to-green-500 opacity-60"></div>
            </div>
        </div>

        <!-- MODERN PROMOTIONAL SLIDER -->
        <div class="bg-white border-b border-gray-100 relative">
            <div class="relative overflow-hidden mx-4 pt-2 pb-3">
                <div class="flex transition-transform duration-500 ease-in-out" id="sliderContainer">
                    <div class="w-full flex-shrink-0 rounded-2xl shadow-xl relative overflow-hidden">
                        <img src="./images/slider1.jpg" alt="Promotional Banner" class="w-full h-32 object-cover rounded-2xl">
                    </div>
                    <div class="w-full flex-shrink-0 rounded-2xl shadow-xl relative overflow-hidden">
                        <img src="./images/slider2.jpg" alt="Promotional Banner" class="w-full h-32 object-cover rounded-2xl">
                    </div>
                    <div class="w-full flex-shrink-0 rounded-2xl shadow-xl relative overflow-hidden">
                        <img src="./images/slider3.jpg" alt="Promotional Banner" class="w-full h-32 object-cover rounded-2xl">
                    </div>
                </div>
                <!-- Dots Indicator -->
                <div class="flex justify-center mt-3 gap-2">
                    <div class="w-2 h-2 bg-green-600 rounded-full transition-all duration-300" id="dot0"></div>
                    <div class="w-2 h-2 bg-gray-300 rounded-full transition-all duration-300" id="dot1"></div>
                    <div class="w-2 h-2 bg-gray-300 rounded-full transition-all duration-300" id="dot2"></div>
                </div>
            </div>
        </div>

        <!-- SEARCH BOX IN HEADER -->
        <div class="px-4 py-3 bg-white border-b border-gray-100">
            <div class="flex items-center justify-center gap-3 text-xs">
                <div class="flex items-center gap-2 bg-green-50 px-3 py-2 rounded-full border border-green-200">
                    <i class="fas fa-leaf text-green-600 text-xs"></i>
                    <span class="text-green-700 font-bold">Fresh groceries</span>
                </div>
                <div class="flex items-center gap-2 bg-blue-50 px-3 py-2 rounded-full border border-blue-200">
                    <i class="fas fa-piggy-bank text-blue-600 text-xs"></i>
                    <span class="text-blue-700 font-bold">Money saving</span>
                </div>
                <div class="flex items-center gap-2 bg-orange-50 px-3 py-2 rounded-full border border-orange-200">
                    <i class="fas fa-certificate text-orange-600 text-xs"></i>
                    <span class="text-orange-700 font-bold">100% Authentic</span>
                </div>
            </div>
            <div class="relative mt-3">
                <input type="text" id="searchInput" placeholder="Search products..." oninput="filterProducts()" class="w-full bg-gray-50 border border-gray-200 rounded-2xl px-4 py-3 pl-12 text-sm focus:outline-none focus:border-green-500 focus:bg-white">
                <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"></i>
            </div>
        </div>

        <!-- CATEGORY TABS (Scrollable) -->
        <div class="px-2 sm:px-4 mb-4 flex gap-2 sm:gap-3 overflow-x-auto pb-3 pt-4 scrollbar-hide bg-gradient-to-r from-gray-50 to-white">
            <button data-category="ALL" onclick="setActiveCategory(this, 'ALL')" class="category-btn bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2.5 rounded-2xl text-xs font-bold whitespace-nowrap flex items-center gap-2 shadow-lg border border-green-500/30">üõí All Items</button>
            <button data-category="STAPLES" onclick="setActiveCategory(this, 'STAPLES')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üî• Daily Essentials</button>
            <button data-category="VEGETABLES" onclick="setActiveCategory(this, 'VEGETABLES')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">ü•ï Fresh Vegetables</button>
            <button data-category="LEAFY" onclick="setActiveCategory(this, 'LEAFY')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">ü•¨ Leafy Greens</button>
            <button data-category="FRUITS" onclick="setActiveCategory(this, 'FRUITS')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üçé Fresh Fruits</button>
            <button data-category="ICECREAM" onclick="setActiveCategory(this, 'ICECREAM')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üç¶ Ice Creams</button>
            <button data-category="DRINKS" onclick="setActiveCategory(this, 'DRINKS')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">ü•§ Cool Drinks</button>
            <button data-category="PANSHOP" onclick="setActiveCategory(this, 'PANSHOP')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üö¨ Pan Shop</button>
            <button data-category="NONVEG" onclick="setActiveCategory(this, 'NONVEG')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üçó Meat & Eggs</button>
            <button data-category="BATTERS" onclick="setActiveCategory(this, 'BATTERS')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">ü•û Ready to Cook</button>
            <button data-category="GRAINS" onclick="setActiveCategory(this, 'GRAINS')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üåæ Rice & Grains</button>
            <button data-category="POWDERS" onclick="setActiveCategory(this, 'POWDERS')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üå∂Ô∏è Spices & Masala</button>
            <button data-category="DAIRY" onclick="setActiveCategory(this, 'DAIRY')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">ü•õ Milk & Dairy</button>
            <button data-category="SNACKS" onclick="setActiveCategory(this, 'SNACKS')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üçø Snacks & Namkeen</button>
            <button data-category="PERSONAL" onclick="setActiveCategory(this, 'PERSONAL')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üßº Personal Care</button>
            <button data-category="PARTY" onclick="setActiveCategory(this, 'PARTY')" class="category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300">üéâ Party Supplies</button>
        </div>

        <div class="grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 gap-2 p-2 sm:p-3 bg-gray-50" id="product-grid"></div>
    </div>

    <!-- ABOUT VIEW -->
    <div id="view-about" class="hide pb-32 bg-gradient-to-br from-gray-50 to-white">
        <!-- Modern Header -->
        <div class="bg-gradient-to-r from-green-600 to-emerald-700 text-white p-6 shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -mr-16 -mt-16"></div>
            <div class="relative z-10">
                <h2 class="text-3xl font-black mb-2">About Nekta</h2>
                <p class="text-green-100 opacity-90">Quick ‚Ä¢ Fresh ‚Ä¢ Essential</p>
            </div>
        </div>

        <!-- Hero Section -->
        <div class="p-6">
            <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-3xl shadow-xl border border-gray-200/50 mb-6">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                        <i class="fas fa-mobile-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-3">Our Purpose</h3>
                </div>
                <p class="text-gray-700 leading-relaxed mb-4 text-center">This app is designed for quickly and easily making essential purchases, such as vegetables, health care, breakfast items and snacks. <strong>Saving money is our top priority</strong>, along with maintaining great quality.</p>
                <p class="text-gray-700 leading-relaxed mb-4 text-center">We update daily market prices regularly. This app is for customers who need things quickly.</p>
                <div class="bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-2xl p-4">
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-heart text-white text-sm"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800 mb-1">Try Us Today!</h4>
                            <p class="text-gray-700 text-sm">Please don't judge us; we want you to order something and test the quality of the items received. Please be in touch with us - <strong>we will save your money!</strong></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="grid grid-cols-1 gap-4 mb-6">
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-2xl border border-blue-200/50 shadow-lg">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-clock text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-blue-800">Save Time</h4>
                            <p class="text-blue-700 text-sm">30-min delivery to your doorstep</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-5 rounded-2xl border border-green-200/50 shadow-lg">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-leaf text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-green-800">Fresh Quality</h4>
                            <p class="text-green-700 text-sm">Farm-fresh vegetables & groceries</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-orange-50 to-red-50 p-5 rounded-2xl border border-orange-200/50 shadow-lg">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-orange-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-orange-800">100% Authentic</h4>
                            <p class="text-orange-700 text-sm">Genuine products, no fakes</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Section -->
            <div class="bg-gradient-to-r from-white to-gray-50 p-6 rounded-3xl shadow-xl border border-gray-200/50">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">Get In Touch</h3>
                <div class="space-y-4">
                    <a href="https://wa.me/917702907454" class="flex items-center gap-4 bg-green-50 p-4 rounded-2xl border border-green-200 hover:bg-green-100 transition-colors">
                        <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center">
                            <i class="fab fa-whatsapp text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-green-800">WhatsApp</h4>
                            <p class="text-green-700 text-sm">+91 77029 07454</p>
                        </div>
                    </a>
                    <a href="tel:+917702907454" class="flex items-center gap-4 bg-blue-50 p-4 rounded-2xl border border-blue-200 hover:bg-blue-100 transition-colors">
                        <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-phone text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-blue-800">Call Us</h4>
                            <p class="text-blue-700 text-sm">+91 77029 07454</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- CONTACT VIEW -->
    <div id="view-contact" class="hide pb-32">
        <div class="bg-green-700 text-white p-6 shadow-md">
            <h2 class="text-2xl font-bold mb-1">Get In Touch</h2>
            <p class="text-green-100 text-sm">We are here to help you quickly.</p>
        </div>
        <div class="p-5 space-y-5">
            <div class="bg-white p-4 border border-green-200 rounded-xl shadow-sm flex items-center gap-4">
                <i class="fab fa-whatsapp text-4xl text-green-500"></i>
                <div>
                    <h4 class="font-bold text-lg">WhatsApp Us</h4>
                    <a href="https://wa.me/917702907454" target="_blank" class="text-green-600 underline">Chat Now</a>
                </div>
            </div>
             <div class="bg-white p-4 border border-gray-200 rounded-xl shadow-sm flex items-center gap-4">
                <i class="fas fa-phone-alt text-4xl text-blue-500"></i>
                <div>
                    <h4 class="font-bold text-lg">Call Us</h4>
                    <a href="tel:+917702907454" class="text-blue-600 underline">+91 77029 07454</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div id="view-admin" class="hide pb-32">
        <div class="bg-green-700 text-white p-6 shadow-md">
            <h2 class="text-2xl font-bold mb-1">Admin Panel</h2>
            <p class="text-green-200 text-sm">Manage orders and delivery status</p>
        </div>
        <div class="p-5">
            <!-- Admin Login -->
            <div id="admin-login" class="bg-white p-6 rounded-xl shadow-sm">
                <h3 class="text-lg font-bold mb-4">Admin Access</h3>
                <input type="password" id="admin-password" placeholder="Enter admin password" class="w-full p-3 border border-gray-300 rounded-lg mb-4">
                <button onclick="checkAdminLogin()" class="w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition">Login</button>
            </div>
            
            <!-- Admin Dashboard -->
            <div id="admin-dashboard" class="hide space-y-4">
                <div class="bg-white p-4 rounded-xl shadow-sm">
                    <h3 class="text-lg font-bold mb-4">Recent Orders</h3>
                    <div id="admin-orders-list"></div>
                </div>
                
                <div class="bg-white p-4 rounded-xl shadow-sm">
                    <h3 class="text-lg font-bold mb-4">Update Order Status</h3>
                    <select id="order-select" class="w-full p-3 border border-gray-300 rounded-lg mb-3">
                        <option value="">Select Order</option>
                    </select>
                    <select id="status-select" class="w-full p-3 border border-gray-300 rounded-lg mb-3">
                        <option value="received">üì¶ Order Received</option>
                        <option value="preparing">üë®‚Äçüç≥ Preparing</option>
                        <option value="delivering">üöö Out for Delivery</option>
                        <option value="delivered">‚úÖ Delivered</option>
                    </select>
                    <button onclick="updateOrderStatus()" class="w-full bg-green-600 text-white py-3 rounded-lg font-bold">Update Status</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CART VIEW -->
    <div id="view-cart" class="hide min-h-screen bg-gradient-to-br from-gray-50 to-white"> 
        <div class="bg-gradient-to-r from-green-600 to-emerald-700 p-4 shadow-xl flex items-center justify-between sticky top-0 z-30 text-white">
            <div class="flex items-center gap-4">
                <button onclick="showCurrentView('home')" class="text-white hover:text-green-200 transition-colors"><i class="fas fa-arrow-left text-xl"></i></button>
                <div>
                    <h2 class="font-bold text-xl">Your Cart</h2>
                    <p class="text-green-100 text-xs opacity-90">Review your items</p>
                </div>
            </div>
            <button onclick="clearAllCart()" class="bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full text-white text-sm font-medium hover:bg-white/30 transition-all">
                <i class="fas fa-trash text-xs mr-1"></i> Clear
            </button>
        </div>

        <div class="p-4 space-y-6">
            <div id="cart-items-container" class="space-y-3"></div>

            <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-5 rounded-2xl shadow-lg border border-green-200/50 backdrop-blur-sm">
                <h3 class="font-bold mb-3 text-green-800 flex items-center gap-2 text-lg">
                    <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-map-marker-alt text-white text-sm"></i>
                    </div>
                    Delivery Address
                </h3>
                <div class="bg-white/70 backdrop-blur-sm p-4 rounded-xl border border-white/50">
                    <p class="text-gray-800 font-bold text-lg" id="cartCustName"></p>
                    <p class="text-gray-600 mt-1" id="cartCustAddress"></p>
                    <p class="text-gray-500 text-sm mt-1" id="cartCustPhone"></p>
                    <div class="flex items-center gap-2 mt-3 text-xs text-green-600">
                        <i class="fas fa-shield-alt"></i>
                        <span>Location confirmed during checkout</span>
                    </div>
                </div>
            </div>
            
            <!-- Delivery Time Slot -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-2xl shadow-lg border border-blue-200/50">
                <h3 class="font-bold mb-3 text-blue-800 flex items-center gap-2 text-lg">
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-clock text-white text-sm"></i>
                    </div>
                    Delivery Time
                </h3>
                <select id="deliveryTimeSlot" class="w-full p-4 bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="asap">‚ö° ASAP (30-60 mins)</option>
                    <option value="morning">üåÖ Morning (8 AM - 12 PM)</option>
                    <option value="afternoon">‚òÄÔ∏è Afternoon (12 PM - 4 PM)</option>
                    <option value="evening">üåÜ Evening (4 PM - 8 PM)</option>
                </select>
            </div>
            


            <div class="bg-gradient-to-r from-white to-gray-50 p-6 rounded-2xl shadow-xl border border-gray-200/50">
                <h3 class="font-bold mb-4 text-gray-800 flex items-center gap-2 text-lg">
                    <div class="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-receipt text-white text-sm"></i>
                    </div>
                    Bill Summary
                </h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center py-2 border-b border-gray-100">
                        <span class="text-gray-600">Item Total</span>
                        <span class="font-semibold text-gray-800" id="bill-subtotal">‚Çπ0</span>
                    </div>
                    <div class="flex justify-between items-center py-2 border-b border-gray-100">
                        <span class="text-gray-600">Delivery Fee</span>
                        <span class="font-semibold text-green-600">‚Çπ20</span>
                    </div>
                    <div class="flex justify-between items-center py-3 bg-gradient-to-r from-green-50 to-emerald-50 -mx-2 px-4 rounded-xl">
                        <span class="font-bold text-green-800 text-lg">Total Amount</span>
                        <span class="font-bold text-green-800 text-xl" id="bill-total">‚Çπ0</span>
                    </div>
                </div>
                <div id="minOrderNote" class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-xl">
                    <div class="flex items-center gap-2 text-yellow-700">
                        <i class="fas fa-info-circle"></i>
                        <span class="text-sm font-medium">Minimum order ‚Çπ100 required for delivery</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="confirmOrderSection" class="hide p-4 mt-6">
            <button onclick="openPaymentModal()" class="w-full bg-gradient-to-r from-green-600 via-emerald-600 to-green-700 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 shadow-xl hover:shadow-2xl transform hover:scale-[1.02] transition-all duration-300 relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 hover:opacity-20 transform -skew-x-12 -translate-x-full hover:translate-x-full transition-all duration-700"></div>
                <div class="relative flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fab fa-whatsapp text-xl"></i>
                    </div>
                    <div class="text-left">
                        <div class="font-black text-lg">CONFIRM ORDER</div>
                        <div class="text-xs opacity-90">Secure checkout via WhatsApp</div>
                    </div>
                </div>
            </button>
        </div>

        <!-- PAYMENT METHOD MODAL -->
        <div id="payment-modal" class="hide fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4 backdrop-blur-sm">
            <div class="bg-white rounded-2xl sm:rounded-3xl w-full max-w-sm sm:max-w-md p-4 sm:p-6 shadow-2xl transform transition-all duration-300 scale-95 opacity-0 max-h-[90vh] overflow-y-auto" id="payment-modal-content">
                <!-- Header -->
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-credit-card text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Choose Payment Method</h3>
                    <p class="text-sm text-gray-500 mt-1">Select how you'd like to pay for your order</p>
                </div>
                
                <!-- Payment Options -->
                <div class="space-y-4 mb-6">
                    <!-- Online Payment -->
                    <label class="payment-option block cursor-pointer">
                        <input type="radio" name="paymentMethod" value="ONLINE" id="pay-online" class="hidden">
                        <div class="payment-card border-2 border-gray-200 rounded-2xl p-4 transition-all duration-200 hover:border-blue-300 hover:shadow-md">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-mobile-alt text-white text-lg"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-bold text-gray-800">Online Payment</div>
                                    <div class="text-sm text-gray-500">Pay instantly via UPI, Cards & Wallets</div>
                                    <div class="text-xs text-green-600 font-medium mt-1">‚úì Secure & Fast</div>
                                </div>
                                <div class="radio-indicator w-5 h-5 border-2 border-gray-300 rounded-full flex items-center justify-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full opacity-0 transition-opacity duration-200"></div>
                                </div>
                            </div>
                        </div>
                    </label>
                    
                    <!-- Cash on Delivery -->
                    <label class="payment-option block cursor-pointer">
                        <input type="radio" name="paymentMethod" value="COD" id="pay-cod" class="hidden" checked>
                        <div class="payment-card border-2 border-green-300 rounded-2xl p-4 transition-all duration-200 shadow-md bg-green-50">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-money-bill-wave text-white text-lg"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-bold text-gray-800">Cash On Delivery</div>
                                    <div class="text-sm text-gray-500">Pay when your order arrives</div>
                                    <div class="text-xs text-orange-600 font-medium mt-1">‚úì No advance payment needed</div>
                                </div>
                                <div class="radio-indicator w-5 h-5 border-2 border-green-500 rounded-full flex items-center justify-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full transition-opacity duration-200"></div>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex gap-3">
                    <button onclick="closePaymentModal()" class="flex-1 bg-gray-100 text-gray-600 py-3 rounded-xl font-medium hover:bg-gray-200 transition-colors">
                        Cancel
                    </button>
                    <button onclick="confirmPaymentAndSend()" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-xl font-bold hover:from-green-600 hover:to-green-700 transition-all shadow-lg">
                        Proceed to Pay
                    </button>
                </div>
            </div>
        </div>

        <!-- UPI PAYMENT MODAL (shows when Online Payment is selected) -->
        <div id="upi-payment-modal" class="hide fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-2 sm:p-4">
            <div class="bg-white rounded-xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 max-h-[90vh] overflow-y-auto">
                <div class="text-center mb-6">
                    <div class="text-4xl mb-2">üí≥</div>
                    <h3 class="text-xl font-bold">Secure Payment via Razorpay</h3>
                    <p class="text-sm text-gray-500 mt-1">Pay securely using UPI, Cards, or Wallets</p>
                </div>
                <div id="razorpay-info" class="bg-blue-50 p-4 rounded-lg mb-4 border border-blue-200 text-sm text-center">
                    <div id="razorpay-amount" class="text-2xl font-bold text-blue-700 mb-2">‚Çπ0</div>
                    <div class="text-gray-700">Click below to proceed to secure payment</div>
                </div>
                <div class="flex gap-3">
                    <button onclick="initiateRazorpayPayment()" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700">Proceed to Pay</button>
                    <button onclick="cancelUPIPayment()" class="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg">Cancel</button>
                </div>
                <p class="text-xs text-gray-500 text-center mt-3">Powered by Razorpay ‚Ä¢ Secure & Fast</p>
            </div>
        </div>
    </div>
    


    <!-- BOTTOM NAV -->
    <div id="bottom-nav" class="sticky-bottom-nav hide">
        <div class="flex justify-around items-center h-full px-4">
            <button onclick="showCurrentView('home')" class="nav-item active flex flex-col items-center py-1 px-2 rounded-3xl">
                <div class="nav-icon bg-gradient-to-br from-green-100 to-green-200 rounded-2xl p-2 flex items-center justify-center">
                    <i class="fas fa-home text-xl text-green-700"></i>
                </div>
                <span>Home</span>
            </button>
            <button onclick="showCart()" class="nav-item text-gray-500 hover:text-green-600 flex flex-col items-center py-1 px-2 rounded-3xl relative">
                <div class="nav-icon bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl p-2 flex items-center justify-center relative">
                    <i class="fas fa-shopping-bag text-xl"></i>
                    <span id="bottomCartBadge" class="hide absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-4 h-4 rounded-full flex items-center justify-center shadow-lg">0</span>
                </div>
                <span>Cart</span>
            </button>
            <button onclick="showCurrentView('about')" class="nav-item text-gray-500 hover:text-green-600 flex flex-col items-center py-1 px-2 rounded-3xl">
                <div class="nav-icon bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl p-2 flex items-center justify-center">
                    <i class="fas fa-info-circle text-xl"></i>
                </div>
                <span>About</span>
            </button>

        </div>
    </div>

</div>

<script>
    // Global error overlay so users can see runtime errors without opening devtools
    (function(){
        const overlay = document.createElement('div');
        overlay.id = 'error-overlay';
        overlay.className = 'error-overlay';
        overlay.innerHTML = `<div class="error-box"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"><strong>Application Error</strong><button id="error-close" style="background:#ef4444;color:#fff;border:none;padding:6px 10px;border-radius:8px;cursor:pointer">Dismiss</button></div><pre id="error-pre"></pre></div>`;
        document.addEventListener('DOMContentLoaded', ()=> document.body.appendChild(overlay));

        function showError(msg) { // This function is not used, but it's part of a good debugging pattern.
            const el = document.getElementById('error-overlay') || overlay;
            const pre = el.querySelector('#error-pre');
            if (pre) pre.textContent = msg;
            el.style.display = 'flex';
        }

        window.addEventListener('error', function(ev){
            try { showError((ev && ev.message ? ev.message : 'Unknown error') + '\n' + (ev && ev.error && ev.error.stack ? ev.error.stack : (ev && ev.filename ? ev.filename+':'+ev.lineno : ''))); } catch(e){}
        });
        window.addEventListener('unhandledrejection', function(ev){
            try { showError('Unhandled Promise Rejection:\n' + (ev && ev.reason ? (ev.reason.stack || ev.reason) : JSON.stringify(ev))); } catch(e){}
        });

        document.addEventListener('click', function(e){
            if (e.target && e.target.id === 'error-close') {
                const el = document.getElementById('error-overlay');
                if (el) el.style.display = 'none';
            }
        });
    })();
    const products = [
        // --- STAPLES (BUNDLE PACKS ONLY) ---
        { id: 300, name: "Daily Essentials Bundle", teluguName: "‡∞∞‡±ã‡∞ú‡±Å‡∞µ‡∞æ‡∞∞‡±Ä ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞æ‡∞≤‡±Å", price: 199, originalPrice: 280, unit: "Pack", category: "STAPLES", img: "./images/daily-essentials-bundle.jpg", savings: "Save ‚Çπ81" },
        { id: 301, name: "Weekly Essentials Bundle", teluguName: "‡∞µ‡∞æ‡∞∞‡∞™‡±Å ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞æ‡∞≤‡±Å", price: 499, originalPrice: 720, unit: "Pack", category: "STAPLES", img: "./images/weekly-essentials-bundle.jpg", savings: "Save ‚Çπ221" },

        // --- BREAKFAST COMBOS (7 items) ---
        { id: 302, name: "Daily Boost Breakfast", teluguName: "‡∞°‡±à‡∞≤‡±Ä ‡∞¨‡±Ç‡∞∏‡±ç‡∞ü‡±ç ‡∞Ö‡∞≤‡±ç‡∞™‡∞æ‡∞π‡∞æ‡∞∞‡∞Ç", price: 289, originalPrice: 380, unit: "Combo", category: "STAPLES", img: "./images/daily-boost-breakfast.jpg", savings: "Save ‚Çπ91", description: "1L milk + 6 eggs + 400g bread + 500g dosa batter + 500g fruits" },
        { id: 304, name: "Idli Special Combo", teluguName: "‡∞á‡∞°‡±ç‡∞≤‡±Ä ‡∞∏‡±ç‡∞™‡±Ü‡∞∑‡∞≤‡±ç ‡∞ï‡∞æ‡∞Ç‡∞¨‡±ã", price: 259, originalPrice: 340, unit: "Combo", category: "STAPLES", img: "./images/idli-special-combo.jpg", savings: "Save ‚Çπ81", description: "1kg idli batter + 12 eggs + 200g coconut chutney + 500g banana" },
        { id: 312, name: "Milk & Bread Jam", teluguName: "‡∞™‡∞æ‡∞≤‡±Å & ‡∞¨‡±ç‡∞∞‡±Ü‡∞°‡±ç ‡∞ú‡∞æ‡∞Æ‡±ç", price: 89, originalPrice: 110, unit: "Combo", category: "STAPLES", img: "./images/milk-bread-jam.jpg", savings: "Save ‚Çπ21", description: "500ml milk + 400g bread + 200g jam (Eggs sold separately)" },
        { id: 313, name: "Idli Batter & Chutney", teluguName: "‡∞á‡∞°‡±ç‡∞≤‡±Ä ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±ç & ‡∞ö‡∞ü‡±ç‡∞®‡±Ä", price: 79, originalPrice: 95, unit: "Combo", category: "STAPLES", img: "./images/idli-batter-chutney.jpg", savings: "Save ‚Çπ16", description: "500g idli batter + 200g coconut chutney (Sambar powder sold separately)" },
        { id: 314, name: "Eggs & Dosa Batter", teluguName: "‡∞ó‡±Å‡∞°‡±ç‡∞≤‡±Å & ‡∞¶‡±ã‡∞∏ ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±ç", price: 99, originalPrice: 125, unit: "Combo", category: "STAPLES", img: "./images/eggs-dosa-batter.jpg", savings: "Save ‚Çπ26", description: "6 eggs + 500g dosa batter (Coconut & oil sold separately)" },
        { id: 321, name: "Tea Time Essentials", teluguName: "‡∞ü‡±Ä ‡∞ü‡±à‡∞Æ‡±ç ‡∞é‡∞∏‡±Ü‡∞®‡±ç‡∞∑‡∞ø‡∞Ø‡∞≤‡±ç‡∞∏‡±ç", price: 69, originalPrice: 85, unit: "Combo", category: "STAPLES", img: "./images/tea-time-essentials.jpg", savings: "Save ‚Çπ16", description: "500ml milk + 200g biscuits (Tea powder & sugar sold separately)" },
        { id: 322, name: "Breakfast Bread Pack", teluguName: "‡∞Ö‡∞≤‡±ç‡∞™‡∞æ‡∞π‡∞æ‡∞∞ ‡∞¨‡±ç‡∞∞‡±Ü‡∞°‡±ç ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 79, originalPrice: 95, unit: "Combo", category: "STAPLES", img: "./images/breakfast-bread-pack.jpg", savings: "Save ‚Çπ16", description: "400g bread + 200g butter (Jam & eggs sold separately)" },

        // --- LUNCH COMBOS (5 items) ---
        { id: 315, name: "Mixed Veg & Chapatis", teluguName: "‡∞Æ‡∞ø‡∞ï‡±ç‡∞∏‡±ç ‡∞µ‡±Ü‡∞ú‡±ç & ‡∞ö‡∞™‡∞æ‡∞§‡±Ä‡∞≤‡±Å", price: 149, originalPrice: 180, unit: "Combo", category: "STAPLES", img: "./images/mixed-veg-chapatis.jpg", savings: "Save ‚Çπ31", description: "1kg seasonal mixed vegetables + 8 chapatis (Oil & spices sold separately)" },
        { id: 316, name: "Dal & Rice Combo", teluguName: "‡∞¶‡∞æ‡∞≤‡±ç & ‡∞∞‡±à‡∞∏‡±ç ‡∞ï‡∞æ‡∞Ç‡∞¨‡±ã", price: 119, originalPrice: 145, unit: "Combo", category: "STAPLES", img: "./images/dal-rice-combo.jpg", savings: "Save ‚Çπ26", description: "500g toor dal + 1kg rice (Ghee & vegetables sold separately)" },
        { id: 317, name: "Chicken Curry & Rice", teluguName: "‡∞ö‡∞ø‡∞ï‡±Ü‡∞®‡±ç ‡∞ï‡∞∞‡±ç‡∞∞‡±Ä & ‡∞∞‡±à‡∞∏‡±ç", price: 299, originalPrice: 380, unit: "Combo", category: "STAPLES", img: "./images/chicken-curry-rice.jpg", savings: "Save ‚Çπ81", description: "250g chicken + 1kg rice (Onions & tomatoes sold separately)" },
        { id: 323, name: "Roti & Sabzi Base", teluguName: "‡∞∞‡±ã‡∞ü‡±Ä & ‡∞∏‡∞¨‡±ç‡∞ú‡±Ä ‡∞¨‡±á‡∞∏‡±ç", price: 89, originalPrice: 110, unit: "Combo", category: "STAPLES", img: "./images/roti-sabzi-base.jpg", savings: "Save ‚Çπ21", description: "8 rotis + 500g potatoes (Onions & spices sold separately)" },
        { id: 324, name: "Biryani Starter Pack", teluguName: "‡∞¨‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞®‡±Ä ‡∞∏‡±ç‡∞ü‡∞æ‡∞∞‡±ç‡∞ü‡∞∞‡±ç ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 199, originalPrice: 250, unit: "Combo", category: "STAPLES", img: "./images/biryani-starter-pack.jpg", savings: "Save ‚Çπ51", description: "1kg basmati rice + 250g chicken (Biryani masala & curd sold separately)" },
        { id: 318, name: "Mutton Curry & Chapatis", teluguName: "‡∞Æ‡∞ü‡∞®‡±ç ‡∞ï‡∞∞‡±ç‡∞∞‡±Ä & ‡∞ö‡∞™‡∞æ‡∞§‡±Ä‡∞≤‡±Å", price: 449, originalPrice: 550, unit: "Combo", category: "STAPLES", img: "./images/mutton-curry-chapatis.jpg", savings: "Save ‚Çπ101", description: "250g mutton + 8 chapatis (Onions & ginger-garlic sold separately)" },
        { id: 319, name: "Veg Stir-fry & Roti", teluguName: "‡∞µ‡±Ü‡∞ú‡±ç ‡∞∏‡±ç‡∞ü‡∞ø‡∞∞‡±ç-‡∞´‡±ç‡∞∞‡±à & ‡∞∞‡±ã‡∞ü‡±Ä", price: 129, originalPrice: 160, unit: "Combo", category: "STAPLES", img: "./images/veg-stirfry-roti.jpg", savings: "Save ‚Çπ31", description: "1kg fresh mixed vegetables + 6 rotis (Cooking oil & spices sold separately)" },
        { id: 320, name: "Leafy Greens & Dal", teluguName: "‡∞Ü‡∞ï‡±Å ‡∞ï‡±Ç‡∞∞‡∞≤‡±Å & ‡∞¶‡∞æ‡∞≤‡±ç", price: 139, originalPrice: 170, unit: "Combo", category: "STAPLES", img: "./images/leafy-greens-dal.jpg", savings: "Save ‚Çπ31", description: "500g palak/spinach + 500g moong dal (Rice & ghee sold separately)" },
        { id: 325, name: "Fish Curry Essentials", teluguName: "‡∞Æ‡±Ä‡∞®‡±Å ‡∞ï‡∞∞‡±ç‡∞∞‡±Ä ‡∞é‡∞∏‡±Ü‡∞®‡±ç‡∞∑‡∞ø‡∞Ø‡∞≤‡±ç‡∞∏‡±ç", price: 249, originalPrice: 320, unit: "Combo", category: "STAPLES", img: "./images/fish-curry-essentials.jpg", savings: "Save ‚Çπ71", description: "500g fish + 1kg rice (Coconut & tamarind sold separately)" },
        { id: 326, name: "Egg Curry & Bread", teluguName: "‡∞ó‡±Å‡∞°‡±ç‡∞°‡±Å ‡∞ï‡∞∞‡±ç‡∞∞‡±Ä & ‡∞¨‡±ç‡∞∞‡±Ü‡∞°‡±ç", price: 119, originalPrice: 145, unit: "Combo", category: "STAPLES", img: "./images/egg-curry-bread.jpg", savings: "Save ‚Çπ26", description: "6 eggs + 400g bread (Onions & tomatoes sold separately)" },

        // --- STRATEGIC SNACK & EVENING COMBOS ---
        { id: 327, name: "Evening Snack Pack", teluguName: "‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç ‡∞∏‡±ç‡∞®‡∞æ‡∞ï‡±ç ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 89, originalPrice: 110, unit: "Combo", category: "STAPLES", img: "./images/evening-snack-pack.jpg", savings: "Save ‚Çπ21", description: "500ml milk + 200g biscuits (Tea & sugar sold separately)" },
        { id: 331, name: "Movie Night Pack", teluguName: "‡∞∏‡∞ø‡∞®‡∞ø‡∞Æ‡∞æ ‡∞®‡±à‡∞ü‡±ç ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 79, originalPrice: 100, unit: "Combo", category: "STAPLES", img: "./images/movie-night-pack.jpg", savings: "Save ‚Çπ21", description: "100g popcorn + 50g chips + 200g namkeen (Cold drinks sold separately)" },
        { id: 332, name: "Kids Snack Box", teluguName: "‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞≤ ‡∞∏‡±ç‡∞®‡∞æ‡∞ï‡±ç ‡∞¨‡∞æ‡∞ï‡±ç‡∞∏‡±ç", price: 69, originalPrice: 85, unit: "Combo", category: "STAPLES", img: "./images/kids-snack-box.jpg", savings: "Save ‚Çπ16", description: "200g biscuits + 2 chocolates + 100g mixture (Milk sold separately)" },
        { id: 333, name: "Office Break Combo", teluguName: "‡∞Ü‡∞´‡±Ä‡∞∏‡±ç ‡∞¨‡±ç‡∞∞‡±á‡∞ï‡±ç ‡∞ï‡∞æ‡∞Ç‡∞¨‡±ã", price: 59, originalPrice: 75, unit: "Combo", category: "STAPLES", img: "./images/office-break-combo.jpg", savings: "Save ‚Çπ16", description: "200g namkeen + 200g biscuits (Tea & coffee sold separately)" },
        { id: 328, name: "Maggi Noodles Base", teluguName: "‡∞Æ‡∞æ‡∞ó‡±Ä ‡∞®‡±Ç‡∞°‡∞≤‡±ç‡∞∏‡±ç ‡∞¨‡±á‡∞∏‡±ç", price: 69, originalPrice: 85, unit: "Combo", category: "STAPLES", img: "./images/maggi-noodles-base.jpg", savings: "Save ‚Çπ16", description: "4 Maggi packets + 6 eggs (Vegetables & cheese sold separately)" }, // This was a duplicate
        { id: 329, name: "Sandwich Essentials", teluguName: "‡∞∏‡∞æ‡∞Ç‡∞°‡±ç‡∞µ‡∞ø‡∞ö‡±ç ‡∞é‡∞∏‡±Ü‡∞®‡±ç‡∞∑‡∞ø‡∞Ø‡∞≤‡±ç‡∞∏‡±ç", price: 99, originalPrice: 125, unit: "Combo", category: "STAPLES", img: "./images/sandwich-essentials.jpg", savings: "Save ‚Çπ26", description: "400g bread + 200g butter (Vegetables & cheese sold separately)" },
        { id: 330, name: "Paratha Combo", teluguName: "‡∞™‡∞∞‡∞æ‡∞§‡∞æ ‡∞ï‡∞æ‡∞Ç‡∞¨‡±ã", price: 119, originalPrice: 145, unit: "Combo", category: "STAPLES", img: "./images/paratha-combo.jpg", savings: "Save ‚Çπ26", description: "1kg wheat flour + 200g ghee (Vegetables & spices sold separately)" },

        { id: 307, name: "Family Thali Combo", teluguName: "‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞§‡∞æ‡∞≤‡±Ä ‡∞ï‡∞æ‡∞Ç‡∞¨‡±ã", price: 349, originalPrice: 450, unit: "Combo", category: "STAPLES", img: "./images/family-thali-combo.jpg", savings: "Save ‚Çπ101", description: "1kg mixed veg (tomato, onion, brinjal) + 250g dal grains + 500g curd + 12 chapatis" },
        { id: 303, name: "Kitchen Starter Pack", teluguName: "‡∞µ‡∞Ç‡∞ü‡∞ó‡∞¶‡∞ø ‡∞∏‡±ç‡∞ü‡∞æ‡∞∞‡±ç‡∞ü‡∞∞‡±ç", price: 349, originalPrice: 480, unit: "Pack", category: "STAPLES", img: "./images/kitchen-starter-pack.jpg", savings: "Save ‚Çπ131", description: "Basic cooking essentials (Fresh items sold separately)" },

        { id: 305, name: "Quick Meal Combo", teluguName: "‡∞§‡±ç‡∞µ‡∞∞‡∞ø‡∞§ ‡∞≠‡±ã‡∞ú‡∞® ‡∞ï‡∞æ‡∞Ç‡∞¨‡±ã", price: 249, originalPrice: 340, unit: "Pack", category: "STAPLES", img: "./images/quick-meal-combo.jpg", savings: "Save ‚Çπ91", description: "Ready-to-cook items (Fresh vegetables sold separately)" },
        { id: 306, name: "Breakfast Special Pack", teluguName: "‡∞Ö‡∞≤‡±ç‡∞™‡∞æ‡∞π‡∞æ‡∞∞ ‡∞∏‡±ç‡∞™‡±Ü‡∞∑‡∞≤‡±ç", price: 179, originalPrice: 250, unit: "Pack", category: "STAPLES", img: "./images/breakfast-special-pack.jpg", savings: "Save ‚Çπ71", description: "Morning essentials (Eggs & fruits sold separately)" },


        { id: 309, name: "Oil & Ghee Value Pack", teluguName: "‡∞®‡±Ç‡∞®‡±Ü & ‡∞®‡±Ü‡∞Ø‡±ç‡∞Ø‡∞ø ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 449, originalPrice: 620, unit: "Pack", category: "STAPLES", img: "./images/oil-ghee-value-pack.jpg", savings: "Save ‚Çπ171" },


        // --- CORE VEGETABLES (Originals) ---
        { id: 1, name: "Tomato (Local)", teluguName: "‡∞ü‡∞Æ‡∞æ‡∞ü‡∞æ", price: 50, halfPrice: 30, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/tomato.jpg", outOfStock: false },
        { id: 4, name: "Green Chilli", teluguName: "‡∞™‡∞ö‡±ç‡∞ö‡∞ø ‡∞Æ‡∞ø‡∞∞‡±ç‡∞ö‡∞ø", price: 20, halfPrice: 12, unit: "250g", category: "VEGETABLES", img: "./images/green-chilli.jpg", outOfStock: false },
        { id: 5, name: "Ladies Finger (Bhindi)", teluguName: "‡∞¨‡±Ü‡∞Ç‡∞°‡∞ï‡∞æ‡∞Ø", price: 60, halfPrice: 35, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/ladiesfinger.png" },
        { id: 6, name: "Brinjal (Purple)", teluguName: "‡∞µ‡∞Ç‡∞ï‡∞æ‡∞Ø", price: 50, halfPrice: 30, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/brinjal.jpeg" },
        { id: 7, name: "Carrot", teluguName: "‡∞ï‡±ç‡∞Ø‡∞æ‡∞∞‡±Ü‡∞ü‡±ç", price: 70, halfPrice: 40, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/carrot.jpeg" },
        { id: 13, name: "Bottle Gourd (Lauki)", teluguName: "‡∞∏‡±ä‡∞∞‡∞ï‡∞æ‡∞Ø", price: 30, halfPrice: 18, unit: "Pc", category: "VEGETABLES", img: "./images/Bottle Gourd.jpg" },
        { id: 16, name: "Ridge Gourd", teluguName: "‡∞¨‡±Ä‡∞∞‡∞ï‡∞æ‡∞Ø", price: 40, halfPrice: 25, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/Ridge Gourd.jpeg" },

        // --- EXPANDED VEGETABLES (Additional 43 items) ---
        { id: 100, name: "Cauliflower", teluguName: "‡∞ï‡±ç‡∞Ø‡∞æ‡∞¨‡±á‡∞ú‡±Ä ‡∞™‡±Ç‡∞≤‡±Å", price: 45, halfPrice: 28, unit: "Pc", category: "VEGETABLES", img: "./images/cauliflower.jpg" },
        { id: 101, name: "Cabbage", teluguName: "‡∞ï‡±ç‡∞Ø‡∞æ‡∞¨‡±á‡∞ú‡±Ä", price: 30, halfPrice: 18, unit: "Pc", category: "VEGETABLES", img: "./images/cabbage.jpeg" },
        { id: 102, name: "Capsicum (Green)", teluguName: "‡∞™‡∞ö‡±ç‡∞ö‡∞ø ‡∞Æ‡∞ø‡∞∞‡∞™", price: 80, halfPrice: 45, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/Capsicum (Green).jpeg" },
        { id: 103, name: "Capsicum (Red)", teluguName: "‡∞é‡∞∞‡±Å‡∞™‡±Å ‡∞Æ‡∞ø‡∞∞‡∞™", price: 180, halfPrice: 100, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/capsicum-red.jpeg" },
        { id: 104, name: "Capsicum (Yellow)", teluguName: "‡∞™‡∞∏‡±Å‡∞™‡±Å ‡∞Æ‡∞ø‡∞∞‡∞™", price: 170, halfPrice: 95, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/capsicum-yellow.jpg" },
        { id: 105, name: "Sweet Potato", teluguName: "‡∞ö‡∞ø‡∞≤‡∞ó‡∞° ‡∞¶‡±Å‡∞Ç‡∞™", price: 50, halfPrice: 30, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/sweet-potato.jpg" },
        { id: 106, name: "Radish (Mula)", teluguName: "‡∞Æ‡±Å‡∞≤‡±ç‡∞≤‡∞Ç‡∞ó‡∞ø", price: 40, halfPrice: 25, unit: "Kg", category: "VEGETABLES", img: "./images/radish.jpg" },
        { id: 107, name: "Sweet Corn", teluguName: "‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞®", price: 20, halfPrice: 12, unit: "Pc", category: "VEGETABLES", img: "./images/sweet-corn.jpg" },
        { id: 108, name: "Drumstick (Munaga)", teluguName: "‡∞Æ‡±Å‡∞®‡∞ó‡∞ï‡∞æ‡∞Ø", price: 80, halfPrice: 45, unit: "Kg", category: "VEGETABLES", img: "./images/drumstick.jpeg" },
        { id: 109, name: "Cluster Beans (Gokarakaya)", teluguName: "‡∞ó‡±ã‡∞ï‡∞∞‡∞ï‡∞æ‡∞Ø", price: 60, halfPrice: 35, unit: "Kg", category: "VEGETABLES", img: "./images/cluster-beans.jpg" },
        { id: 110, name: "French Beans", teluguName: "‡∞´‡±ç‡∞∞‡±Ü‡∞Ç‡∞ö‡±ç ‡∞¨‡±Ä‡∞®‡±ç‡∞∏‡±ç", price: 70, halfPrice: 40, unit: "Kg", category: "VEGETABLES", img: "./images/french-beans.jpg" },
        { id: 111, name: "Green Peas (Mutter)", teluguName: "‡∞™‡∞ö‡±ç‡∞ö‡∞ø ‡∞¨‡∞†‡∞æ‡∞£‡±Ä", price: 120, halfPrice: 65, unit: "Kg", category: "VEGETABLES", img: "./images/green-peas.jpeg" },
        { id: 112, name: "Bitter Gourd (Kakarakaya)", teluguName: "‡∞ï‡∞æ‡∞ï‡∞∞‡∞ï‡∞æ‡∞Ø", price: 70, halfPrice: 40, unit: "Kg", category: "VEGETABLES", img: "./images/bitter-gourd.jpeg" },
        { id: 113, name: "Snake Gourd (Potlakaya)", teluguName: "‡∞™‡±ä‡∞ü‡±ç‡∞≤‡∞ï‡∞æ‡∞Ø", price: 40, halfPrice: 25, unit: "Pc", category: "VEGETABLES", img: "./images/snake-gourd.jpeg" },
        { id: 114, name: "Ash Gourd (Boodida Gummade)", teluguName: "‡∞¨‡±Ç‡∞°‡∞ø‡∞¶ ‡∞ó‡±Å‡∞Æ‡±ç‡∞Æ‡∞°‡∞ø", price: 50, halfPrice: 30, unit: "Kg", category: "VEGETABLES", img: "./images/ash-gourd.jpeg" },
        { id: 115, name: "Baby Corn", teluguName: "‡∞¨‡±á‡∞¨‡±Ä ‡∞ï‡∞æ‡∞∞‡±ç‡∞®‡±ç", price: 40, halfPrice: 25, unit: "Pack", category: "VEGETABLES", img: "./images/baby-corn.jpg" },
        { id: 116, name: "Mushroom (Button)", teluguName: "‡∞™‡±Å‡∞ü‡±ç‡∞ü‡∞ó‡±ä‡∞°‡±Å‡∞ó‡±Å", price: 45, halfPrice: 28, unit: "Pack", category: "VEGETABLES", img: "./images/mushroom-button.jpeg" },
        { id: 117, name: "Cucumber (Dosakaya)", teluguName: "‡∞ï‡±Ä‡∞∞‡∞æ ‡∞¶‡±ã‡∞∏‡∞ï‡∞æ‡∞Ø", price: 30, halfPrice: 18, unit: "Kg", category: "VEGETABLES", img: "./images/Cucumber.jpg" },

        { id: 119, name: "Broccoli", teluguName: "‡∞¨‡±ç‡∞∞‡±ã‡∞ï‡∞≤‡±Ä", price: 150, halfPrice: 80, unit: "Pc", category: "VEGETABLES", img: "./images/Broccoli.jpeg" },
        { id: 120, name: "Red Onion (Small)", teluguName: "‡∞ö‡∞ø‡∞®‡±ç‡∞® ‡∞â‡∞≤‡±ç‡∞≤‡∞ø‡∞™‡∞æ‡∞Ø", price: 60, halfPrice: 35, unit: "Kg", category: "VEGETABLES", img: "./images/Red Onion (Small).jpeg" },

        { id: 122, name: "Arvi (Taro Root)", teluguName: "‡∞ö‡±á‡∞Æ ‡∞¶‡±Å‡∞Ç‡∞™", price: 50, halfPrice: 30, unit: "Kg", category: "VEGETABLES", img: "./images/Arvi.jpeg" },
        { id: 123, name: "Green Banana (Raw)", teluguName: "‡∞™‡∞ö‡±ç‡∞ö‡∞ø ‡∞Ö‡∞∞‡∞ü‡∞ø‡∞ï‡∞æ‡∞Ø", price: 30, halfPrice: 18, unit: "4 Pcs", category: "VEGETABLES", img: "./images/Green Banana (Raw).jpg" },
        { id: 124, name: "Raw Papaya", teluguName: "‡∞™‡∞ö‡±ç‡∞ö‡∞ø ‡∞¨‡±ä‡∞™‡±ç‡∞™‡∞æ‡∞Ø‡∞ø", price: 40, halfPrice: 25, unit: "Pc", category: "VEGETABLES", img: "./images/Raw Papaya.jpeg" },
        { id: 125, name: "Tindli (Ivy Gourd)", teluguName: "‡∞¶‡±ä‡∞Ç‡∞°‡∞ï‡∞æ‡∞Ø", price: 50, halfPrice: 30, unit: "Kg", category: "VEGETABLES", img: "./images/Tindli.jpeg" },
        { id: 126, name: "Spiny Gourd", teluguName: "‡∞ï‡∞Ç‡∞ü‡∞ï‡∞æ‡∞∞‡∞ø ‡∞ï‡∞æ‡∞Ø", price: 55, halfPrice: 32, unit: "Kg", category: "VEGETABLES", img: "./images/Spiny Gourd.jpg" },





        { id: 132, name: "Round Brinjal (Gulla Vankaya)", teluguName: "‡∞ó‡±Å‡∞≤‡±ç‡∞≤ ‡∞µ‡∞Ç‡∞ï‡∞æ‡∞Ø", price: 60, halfPrice: 35, unit: "Kg", category: "VEGETABLES", img: "./images/Round Brinjal.jpeg" },
        { id: 133, name: "Long Green Beans", teluguName: "‡∞™‡±ä‡∞°‡∞µ‡±Å ‡∞¨‡±Ä‡∞®‡±ç‡∞∏‡±ç", price: 90, halfPrice: 50, unit: "Kg", category: "VEGETABLES", img: "./images/Long Green Beans.jpeg" },



        { id: 138, name: "Beetroot", teluguName: "‡∞¨‡±Ä‡∞ü‡±ç‡∞∞‡±Ç‡∞ü‡±ç", price: 60, halfPrice: 35, unit: "Kg", category: "VEGETABLES", img: "./images/Beetroot.jpeg" },


        { id: 148, name: "Onion (Local)", teluguName: "‡∞®‡∞æ‡∞ü‡±Å ‡∞â‡∞≤‡±ç‡∞≤‡∞ø‡∞™‡∞æ‡∞Ø", price: 35, halfPrice: 20, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/Onion (Local).jpeg" },
        { id: 149, name: "Ginger (Fresh)", teluguName: "‡∞§‡∞æ‡∞ú‡∞æ ‡∞Ö‡∞≤‡±ç‡∞≤‡∞Ç", price: 80, halfPrice: 45, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/Ginger (Fresh).jpeg" },
        { id: 150, name: "Garlic (Bulb)", teluguName: "‡∞µ‡±Ü‡∞≤‡±ç‡∞≤‡±Å‡∞≤‡±ç‡∞≤‡∞ø ‡∞ï‡∞Ç‡∞°", price: 120, halfPrice: 65, unit: "Kg (950g-1000g)", category: "VEGETABLES", img: "./images/Garlic (Bulb).jpg" },
        { id: 151, name: "Lemon", teluguName: "‡∞®‡∞ø‡∞≤‡∞ø‡∞Æ‡±ç‡∞Æ‡∞ï‡∞æ‡∞Ø", price: 10, halfPrice: 6, unit: "3 Pcs", category: "VEGETABLES", img: "./images/Lemon.jpg", outOfStock: false },

        // --- LEAFY GREENS (Aaku Kuralu) - 9 items ---
        { id: 8, name: "Coriander", teluguName: "‡∞ï‡±ä‡∞§‡±ç‡∞§‡∞ø‡∞Æ‡±Ä‡∞∞", price: 15, halfPrice: 10, unit: "Bunch", category: "LEAFY", img: "./images/Coriander.jpg" },
        { id: 9, name: "Spinach (Palak)", teluguName: "‡∞™‡∞æ‡∞≤‡∞ï‡±Ç‡∞∞", price: 20, halfPrice: 12, unit: "Bunch", category: "LEAFY", img: "./images/Spinach.jpg" },
        { id: 14, name: "Curry Leaves", teluguName: "‡∞ï‡∞∞‡∞ø‡∞µ‡±á‡∞™‡∞æ‡∞ï‡±Å", price: 10, halfPrice: 6, unit: "Bunch", category: "LEAFY", img: "./images/Curry Leaves.jpg" },
        { id: 17, name: "Mint Leaves (Pudina)", teluguName: "‡∞™‡±Å‡∞¶‡±Ä‡∞®‡∞æ", price: 10, halfPrice: 6, unit: "Bunch", category: "LEAFY", img: "./images/Mint Leaves.jpg" },
        { id: 141, name: "Fenugreek Leaves (Methi)", teluguName: "‡∞Æ‡±Ü‡∞Ç‡∞§‡∞ø‡∞ï‡±Ç‡∞∞", price: 20, halfPrice: 12, unit: "Bunch", category: "LEAFY", img: "./images/Fenugreek Leaves.jpg" },
        { id: 142, name: "Amaranth Leaves (Thotakura)", teluguName: "‡∞§‡±ã‡∞ü‡∞ï‡±Ç‡∞∞", price: 15, halfPrice: 10, unit: "Bunch", category: "LEAFY", img: "./images/Amaranth Leaves.jpg" },
        { id: 143, name: "Gongoora Leaves (Puntikura)", teluguName: "‡∞ó‡±ã‡∞Ç‡∞ó‡±Ç‡∞∞", price: 25, halfPrice: 15, unit: "Bunch", category: "LEAFY", img: "./images/Gongoora Leaves.jpg" },

        { id: 145, name: "Spring Onion", teluguName: "‡∞â‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ü‡∞ï‡±Å", price: 30, unit: "Bunch", category: "LEAFY", img: "./images/Spring Onion.jpeg" },

        // --- FRUITS ---
        { id: 21, name: "Banana (Yelakki)", teluguName: "‡∞Ö‡∞∞‡∞ü‡∞ø ‡∞™‡∞Ç‡∞°‡±Å", price: 60, unit: "Doz", category: "FRUITS", img: "./images/Banana.png" },
        { id: 22, name: "Apple", teluguName: "‡∞Ü‡∞™‡∞ø‡∞≤‡±ç", price: 180, halfPrice: 95, unit: "Kg (950g-1000g)", category: "FRUITS", img: "./images/Apple.jpeg" }, 
        { id: 200, name: "Mango ", teluguName: "‡∞Ü‡∞Ç ‡∞™‡∞Ç‡∞°‡±Å", price: 250, unit: "Kg (950g-1000g)", category: "FRUITS", img: "./images/Mango.jpg" },
        { id: 201, name: "Orange (Sweet)", teluguName: "‡∞Ü‡∞∞‡±Ü‡∞Ç‡∞ú‡±ç", price: 120, unit: "Kg (950g-1000g)", category: "FRUITS", img: "./images/Orange.jpg" },
        { id: 202, name: "Grapes (Green)", teluguName: "‡∞¶‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞∑ (‡∞Ü‡∞ï‡±Å‡∞™‡∞ö‡±ç‡∞ö)", price: 180, unit: "Kg (950g-1000g)", category: "FRUITS", img: "./images/Grapes (Green).jpg" },
        { id: 203, name: "Grapes (Black)", teluguName: "‡∞¶‡±ç‡∞∞‡∞æ‡∞ï‡±ç‡∞∑ (‡∞®‡∞≤‡±ç‡∞≤)", price: 200, unit: "Kg (950g-1000g)", category: "FRUITS", img: "./images/Grapes (Black).jpg" },
        { id: 204, name: "Pomegranate", teluguName: "‡∞¶‡∞æ‡∞®‡∞ø‡∞Æ", price: 150, halfPrice: 80, unit: "Kg", category: "FRUITS", img: "./images/Pomegranate.jpg" },
        { id: 205, name: "Papaya (Sweet)", teluguName: "‡∞¨‡±ä‡∞™‡±ç‡∞™‡∞æ‡∞Ø‡∞ø", price: 80, halfPrice: 45, unit: "Kg", category: "FRUITS", img: "./images/Papaya (Sweet).jpg" },
        { id: 206, name: "Watermelon", teluguName: "‡∞ï‡±Ç‡∞∞‡±ç‡∞Æ ‡∞µ‡∞ø‡∞∏‡±ç‡∞∏‡∞ï‡∞æ‡∞Ø", price: 40, halfPrice: 25, unit: "Kg", category: "FRUITS", img: "./images/Watermelon.jpg" },
        { id: 207, name: "Pineapple", teluguName: "‡∞Ö‡∞®‡∞æ‡∞∞‡±ç", price: 100, unit: "Pc", category: "FRUITS", img: "./images/Pineapple.jpg" },
        { id: 208, name: "Guava (Green)", teluguName: "‡∞ú‡∞æ‡∞Æ", price: 60, halfPrice: 35, unit: "Kg", category: "FRUITS", img: "./images/Guava (Green).jpeg" },
        { id: 209, name: "Kiwi", teluguName: "‡∞ï‡∞ø‡∞µ‡±Ä", price: 280, halfPrice: 150, unit: "Kg", category: "FRUITS", img: "./images/Kiwi.jpg" },
        { id: 210, name: "Coconut (Fresh)", teluguName: "‡∞ï‡±ä‡∞¨‡±ç‡∞¨‡∞∞‡∞ø", price: 30, unit: "Pc", category: "FRUITS", img: "./images/Coconut (Fresh).jpg" },
        { id: 211, name: "Strawberry", teluguName: "‡∞∏‡±ç‡∞ü‡±ç‡∞∞‡∞æ‡∞¨‡±Ü‡∞∞‡±ç‡∞∞‡±Ä", price: 320, halfPrice: 170, unit: "Kg", category: "FRUITS", img: "./images/Strawberry.jpeg" },
        { id: 212, name: "Mosambi (Sweet Lime)", teluguName: "‡∞Æ‡±ä‡∞∏‡∞Ç‡∞¨‡∞ø", price: 80, halfPrice: 45, unit: "Kg", category: "FRUITS", img: "./images/Mosambi (Sweet Lime).jpg" },
        { id: 213, name: "Dragon Fruit", teluguName: "‡∞°‡±ç‡∞∞‡∞æ‡∞ó‡∞®‡±ç ‡∞´‡±ç‡∞∞‡±Ç‡∞ü‡±ç", price: 200, unit: "Pc", category: "FRUITS", img: "./images/Dragon Fruit.jpg" },

        
        // --- ICE CREAMS (Minimum price ‚Çπ40; 10 items) ---
        { id: 60, name: "Vanilla Cup (Small)", teluguName: "‡∞µ‡±Ü‡∞®‡±Ä‡∞≤‡∞æ ‡∞ï‡∞™‡±ç", price: 40, unit: "Pc", category: "ICECREAM", img: "./images/" },
        { id: 61, name: "Chocolate Cone", teluguName: "‡∞ö‡∞æ‡∞ï‡±ç‡∞≤‡±Ü‡∞ü‡±ç ‡∞ï‡±ã‡∞®‡±ç", price: 45, unit: "Pc", category: "ICECREAM", img: "./images/" },
        { id: 62, name: "Butterscotch Cone", teluguName: "‡∞¨‡∞ü‡∞∞‡±ç ‡∞∏‡±ç‡∞ï‡∞æ‡∞ö‡±ç", price: 40, unit: "Pc", category: "ICECREAM", img: "./images/" },
        { id: 63, name: "Choco Bar (Premium)", teluguName: "‡∞ö‡∞æ‡∞ï‡±ã ‡∞¨‡∞æ‡∞∞‡±ç", price: 40, unit: "Pc", category: "ICECREAM", img: "./images/" },
        { id: 64, name: "Kulfi Stick (Malai)", teluguName: "‡∞ï‡±Å‡∞≤‡±ç‡∞´‡±Ä", price: 40, unit: "Pc", category: "ICECREAM", img: "./images/" },
        { id: 65, name: "Mango Duet (Premium)", teluguName: "‡∞Æ‡∞æ‡∞Æ‡∞ø‡∞°‡∞ø ‡∞¨‡∞æ‡∞∞‡±ç", price: 45, unit: "Pc", category: "ICECREAM", img: "./images/" },
        { id: 66, name: "Fruit Sorbet Cup", teluguName: "‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡±Å ‡∞∏‡±ã‡∞∞‡±ç‡∞¨‡±Ü‡∞ü‡±ç", price: 40, unit: "Pc", category: "ICECREAM", img: "" },
        { id: 67, name: "Cassata Slice", teluguName: "‡∞ï‡∞∏‡∞æ‡∞ü‡∞æ ‡∞∏‡±ç‡∞≤‡±à‡∞∏‡±ç", price: 50, unit: "Pc", category: "ICECREAM", img: "" },
        { id: 68, name: "Strawberry Cup", teluguName: "‡∞∏‡±ç‡∞ü‡±ç‡∞∞‡∞æ‡∞¨‡±Ü‡∞∞‡±ç‡∞∞‡±Ä ‡∞ï‡∞™‡±ç", price: 40, unit: "Pc", category: "ICECREAM", img: "" },
        { id: 69, name: "Black Currant Cup", teluguName: "‡∞¨‡±ç‡∞≤‡∞æ‡∞ï‡±ç ‡∞ï‡∞∞‡±Ü‡∞Ç‡∞ü‡±ç", price: 40, unit: "Pc", category: "ICECREAM", img: "" },

        // --- COOL DRINKS (TINS Only - 10 items) ---
        { id: 70, name: "Thums Up (Tin)", teluguName: "‡∞•‡∞Æ‡±ç‡∞∏‡±ç ‡∞Ö‡∞™‡±ç", price: 40, unit: "300ml", category: "DRINKS", img: "./images/" },
        { id: 71, name: "Coca Cola (Tin)", teluguName: "‡∞ï‡±ã‡∞ï‡∞æ‡∞ï‡±ã‡∞≤‡∞æ", price: 40, unit: "300ml", category: "DRINKS", img: "./images/" },
        { id: 72, name: "Sprite (Tin)", teluguName: "‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±à‡∞ü‡±ç", price: 40, unit: "300ml", category: "DRINKS", img: "./images/" },
        { id: 73, name: "Red Bull", teluguName: "‡∞∞‡±Ü‡∞°‡±ç ‡∞¨‡±Å‡∞≤‡±ç", price: 125, unit: "Can", category: "DRINKS", img: "./images/" },
        { id: 74, name: "Sting (Energy)", teluguName: "‡∞∏‡±ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç", price: 20, unit: "Can", category: "DRINKS", img: "./images/" },
        { id: 75, name: "Maaza (Tin)", teluguName: "‡∞Æ‡∞æ‡∞ú‡∞æ", price: 35, unit: "250ml", category: "DRINKS", img: "./images/" },
        { id: 76, name: "Mountain Dew (Tin)", teluguName: "‡∞°‡±ç‡∞Ø‡±Ç", price: 40, unit: "300ml", category: "DRINKS", img: "./images/" },
        { id: 77, name: "7 Up (Tin)", teluguName: "7 ‡∞Ö‡∞™‡±ç", price: 40, unit: "300ml", category: "DRINKS", img: "./images/" },
        { id: 78, name: "Fanta (Tin)", teluguName: "‡∞´‡∞æ‡∞Ç‡∞ü‡∞æ", price: 40, unit: "300ml", category: "DRINKS", img: "./images/" },
        { id: 79, name: "Diet Coke (Tin)", teluguName: "‡∞°‡±à‡∞ü‡±ç ‡∞ï‡±ã‡∞ï‡±ç", price: 45, unit: "300ml", category: "DRINKS", img: "./images/" },
        
        // --- WATER BOTTLES ---
        { id: 736, name: "Packaged Water (500ml)", teluguName: "‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±á‡∞ú‡±ç‡∞°‡±ç ‡∞µ‡∞æ‡∞ü‡∞∞‡±ç 500ml", price: 10, unit: "500ml", category: "DRINKS", img: "./images/" },
        { id: 737, name: "Packaged Water (1L)", teluguName: "‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±á‡∞ú‡±ç‡∞°‡±ç ‡∞µ‡∞æ‡∞ü‡∞∞‡±ç 1L", price: 20, unit: "1L", category: "DRINKS", img: "./images/" },
        { id: 738, name: "Mineral Water (500ml)", teluguName: "‡∞Æ‡∞ø‡∞®‡∞∞‡∞≤‡±ç ‡∞µ‡∞æ‡∞ü‡∞∞‡±ç 500ml", price: 15, unit: "500ml", category: "DRINKS", img: "./images/" },
        { id: 739, name: "Mineral Water (1L)", teluguName: "‡∞Æ‡∞ø‡∞®‡∞∞‡∞≤‡±ç ‡∞µ‡∞æ‡∞ü‡∞∞‡±ç 1L", price: 25, unit: "1L", category: "DRINKS", img: "./images/" },
        { id: 740, name: "Water Bottles (Pack of 12)", teluguName: "‡∞µ‡∞æ‡∞ü‡∞∞‡±ç ‡∞¨‡∞æ‡∞ü‡∞ø‡∞≤‡±ç‡∞∏‡±ç 12 ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 120, unit: "12x500ml", category: "DRINKS", img: "./images/" },

        // --- CIGARETTES (PAN SHOP - 11 items) ---
        { id: 80, name: "Gold Flake (Kings)", teluguName: "‡∞ó‡±ã‡∞≤‡±ç‡∞°‡±ç ‡∞´‡±ç‡∞≤‡±á‡∞ï‡±ç ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç‡∞∏‡±ç", price: 190, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 81, name: "Gold Flake (Lights)", teluguName: "‡∞ó‡±ã‡∞≤‡±ç‡∞°‡±ç ‡∞´‡±ç‡∞≤‡±á‡∞ï‡±ç ‡∞≤‡±à‡∞ü‡±ç‡∞∏‡±ç", price: 190, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 82, name: "Gold Flake (Small)", teluguName: "‡∞ö‡∞ø‡∞®‡±ç‡∞® ‡∞ó‡±ã‡∞≤‡±ç‡∞°‡±ç ‡∞´‡±ç‡∞≤‡±á‡∞ï‡±ç", price: 95, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 83, name: "Wills (Navy Cut)", teluguName: "‡∞µ‡∞ø‡∞≤‡±ç‡∞∏‡±ç", price: 180, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 84, name: "Classic (Regular)", teluguName: "‡∞ï‡±ç‡∞≤‡∞æ‡∞∏‡∞ø‡∞ï‡±ç", price: 340, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 85, name: "Classic (Milds)", teluguName: "‡∞ï‡±ç‡∞≤‡∞æ‡∞∏‡∞ø‡∞ï‡±ç ‡∞Æ‡±à‡∞≤‡±ç‡∞°‡±ç‡∞∏‡±ç", price: 340, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 86, name: "Marlboro (Red)", teluguName: "‡∞Æ‡∞æ‡∞∞‡±ç‡∞≤‡±ç‡∞¨‡±ã‡∞∞‡±ã ‡∞∞‡±Ü‡∞°‡±ç", price: 360, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 87, name: "Marlboro (Lights)", teluguName: "‡∞Æ‡∞æ‡∞∞‡±ç‡∞≤‡±ç‡∞¨‡±ã‡∞∞‡±ã ‡∞≤‡±à‡∞ü‡±ç‡∞∏‡±ç", price: 360, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 88, name: "Charminar (Local)", teluguName: "‡∞ö‡∞æ‡∞∞‡±ç‡∞Æ‡∞ø‡∞®‡∞æ‡∞∞‡±ç", price: 50, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 89, name: "Bristol", teluguName: "‡∞¨‡±ç‡∞∞‡∞ø‡∞∏‡±ç‡∞ü‡∞≤‡±ç", price: 80, unit: "Pack", category: "PANSHOP", img: "./images/" },
        { id: 90, name: "Insignia", teluguName: "‡∞á‡∞®‡±ç‡∞∏‡∞ø‡∞ó‡±ç‡∞®‡∞ø‡∞Ø‡∞æ", price: 450, unit: "Pack", category: "PANSHOP", img: "./images/" },

        // --- LIGHTERS (PAN SHOP - 2 local brands) ---
        { id: 91, name: "Devi Lighter (Refillable)", teluguName: "‡∞¶‡±á‡∞µ‡∞ø ‡∞≤‡±à‡∞ü‡∞∞‡±ç", price: 35, unit: "Pc", category: "PANSHOP", img: "./images/" },
        { id: 92, name: "Ronson Lighter (Premium)", teluguName: "‡∞∞‡∞æ‡∞®‡±ç‡∞∏‡∞®‡±ç ‡∞≤‡±à‡∞ü‡∞∞‡±ç", price: 50, unit: "Pc", category: "PANSHOP", img: "./images/" },

        // --- NON-VEG (FROZEN - 10 items) ---
        { id: 100, name: "Chicken Breast (Boneless)", teluguName: "‡∞ï‡±ã‡∞°‡∞ø ‡∞Æ‡±Å‡∞ï‡±ç‡∞ï‡∞≤‡±Å", price: 280, halfPrice: 150, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 101, name: "Chicken Thighs", teluguName: "‡∞ï‡±ã‡∞°‡∞ø ‡∞§‡±ä‡∞°", price: 220, halfPrice: 120, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 102, name: "Chicken Legs", teluguName: "‡∞ï‡±ã‡∞°‡∞ø ‡∞ï‡∞æ‡∞≥‡±ç‡∞≥‡±Å", price: 180, halfPrice: 100, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 103, name: "Mutton (Goat Meat)", teluguName: "‡∞ó‡±ä‡∞∞‡±ç‡∞∞‡±Ü‡∞®‡±Å", price: 800, halfPrice: 420, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 104, name: "Fish (Rohu)", teluguName: "‡∞∞‡±ã‡∞π‡±Ç ‡∞ö‡±á‡∞™‡∞≤‡±Å", price: 300, halfPrice: 160, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 105, name: "Fish (Tilapia)", teluguName: "‡∞ü‡∞ø‡∞≤‡±á‡∞™‡∞ø‡∞Ø‡∞æ", price: 250, halfPrice: 135, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 106, name: "Prawns (Shrimp)", teluguName: "‡∞∞‡±ä‡∞Ø‡±ç‡∞Ø‡∞≤‡±Å", price: 500, halfPrice: 270, unit: "Kg", category: "NONVEG", img: "./images/" },
        { id: 107, name: "Eggs (Brown) - 6 Pc", teluguName: "‡∞ó‡±Å‡∞°‡±ç‡∞°‡±Å (6 ‡∞™‡∞ø‡∞∏‡±Ä)", price: 45, unit: "Pack", category: "NONVEG", img: "./images/" },
        { id: 108, name: "Eggs (Brown) - 12 Pc", teluguName: "‡∞ó‡±Å‡∞°‡±ç‡∞°‡±Å (12 ‡∞™‡∞ø‡∞∏‡±Ä)", price: 85, unit: "Pack", category: "NONVEG", img: "./images/" },
        { id: 109, name: "Chicken Keema (Minced)", teluguName: "‡∞ï‡±ã‡∞°‡∞ø ‡∞ï‡±Ä‡∞Æ‡∞æ", price: 240, halfPrice: 130, unit: "Kg", category: "NONVEG", img: "./images/" },

        // --- BATTERS & INSTANT (Ready-to-Cook) ---
        { id: 110, name: "Idly Batter (Fresh)", teluguName: "‡∞á‡∞°‡±ç‡∞≤‡±Ä ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±ç", price: 60, halfPrice: 35, unit: "500g", category: "BATTERS", img: "./images/" },
        { id: 111, name: "Dosa Batter (Fresh)", teluguName: "‡∞¶‡±ã‡∞∏ ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±ç", price: 60, halfPrice: 35, unit: "500g", category: "BATTERS", img: "./images/" },
        { id: 112, name: "Frozen Chapathi", teluguName: "‡∞´‡±ç‡∞∞‡±ã‡∞ú‡∞®‡±ç ‡∞ö‡∞™‡∞æ‡∞§‡∞ø", price: 90, unit: "Pack (10pcs)", category: "BATTERS", img: "./images/" },
        { id: 113, name: "Instant Parota (Frozen)", teluguName: "‡∞™‡∞∞‡±ã‡∞ü ‡∞´‡±ç‡∞∞‡±ã‡∞ú‡∞®‡±ç", price: 80, unit: "Pack (5pcs)", category: "BATTERS", img: "./images/" },
        { id: 114, name: "Fresh Chapatis (8pcs)", teluguName: "‡∞§‡∞æ‡∞ú‡∞æ ‡∞ö‡∞™‡∞æ‡∞§‡±Ä‡∞≤‡±Å", price: 40, unit: "Pack (8pcs)", category: "BATTERS", img: "./images/" },
        { id: 115, name: "Uttapam Batter", teluguName: "‡∞â‡∞§‡±ç‡∞§‡∞™‡∞Ç ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±ç", price: 65, halfPrice: 38, unit: "500g", category: "BATTERS", img: "./images/" },
        { id: 116, name: "Fresh Rotis (6pcs)", teluguName: "‡∞§‡∞æ‡∞ú‡∞æ ‡∞∞‡±ã‡∞ü‡±Ä‡∞≤‡±Å", price: 30, unit: "Pack (6pcs)", category: "BATTERS", img: "./images/" },
        { id: 117, name: "Bread (400g)", teluguName: "‡∞¨‡±ç‡∞∞‡±Ü‡∞°‡±ç", price: 25, unit: "400g", category: "BATTERS", img: "./images/" },
        { id: 118, name: "Coconut (Fresh Grated)", teluguName: "‡∞ï‡±ä‡∞¨‡±ç‡∞¨‡∞∞‡∞ø ‡∞ó‡±ç‡∞∞‡±á‡∞ü‡±Ü‡∞°‡±ç", price: 20, unit: "200g", category: "BATTERS", img: "./images/" },
        { id: 119, name: "Coconut Chutney (Ready)", teluguName: "‡∞ï‡±ä‡∞¨‡±ç‡∞¨‡∞∞‡∞ø ‡∞ö‡∞ü‡±ç‡∞®‡±Ä", price: 25, unit: "200g", category: "BATTERS", img: "./images/" },

        // --- GRAINS (4 items) ---
        { id: 215, name: "Sona Masoori Rice (1Kg)", teluguName: "‡∞∏‡±ã‡∞®‡∞æ ‡∞Æ‡∞∏‡±Ç‡∞∞‡∞ø ‡∞¨‡∞ø‡∞Ø‡±ç‡∞Ø‡∞Ç", price: 70, halfPrice: 40, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },
        { id: 216, name: "Basmati Rice (Premium) 1Kg", teluguName: "‡∞¨‡∞æ‡∞∏‡±ç‡∞Æ‡∞§‡∞ø ‡∞¨‡∞ø‡∞Ø‡±ç‡∞Ø‡∞Ç", price: 150, halfPrice: 80, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },
        { id: 217, name: "Toor Dal (Arhar) 1Kg", teluguName: "‡∞§‡±Ç‡∞∞ ‡∞¶‡∞æ‡∞≤‡±ç", price: 120, halfPrice: 65, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },
        { id: 218, name: "Atta (Whole Wheat) 5Kg", teluguName: "‡∞ó‡±ã‡∞¶‡±Ä ‡∞™‡∞ø‡∞Ç‡∞°‡∞ø", price: 250, unit: "Pack (5Kg)", category: "GRAINS", img: "./images/" },
        // --- LOCAL MILLETS (Added per request) ---
        { id: 224, name: "Finger Millet (Ragi)", teluguName: "‡∞∞‡∞æ‡∞ó‡±Å‡∞≤‡±Å", aliases: ["ragi","finger millet","ragulu","finger-millet"], price: 95, halfPrice: 50, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },
        { id: 225, name: "Pearl Millet (Bajra)", teluguName: "‡∞∏‡∞ú‡±ç‡∞ú‡∞≤‡±Å", aliases: ["bajra","pearl millet","sajjalu","bajra millet"], price: 60, halfPrice: 35, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },
        { id: 226, name: "Foxtail Millet (Korralu)", teluguName: "‡∞ï‡±ä‡∞∞‡±ç‡∞∞‡∞≤‡±Å", aliases: ["foxtail millet","korralu","kangni","foxtail"], price: 120, halfPrice: 65, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },
        { id: 227, name: "Sorghum (Jowar)", teluguName: "‡∞ú‡±ä‡∞®‡±ç‡∞®‡∞≤‡±Å", aliases: ["jowar","sorghum","jonnalu","jonna"], price: 55, halfPrice: 30, unit: "Kg (950g-1000g)", category: "GRAINS", img: "./images/" },

        // --- POWDERS & SPICES ---
        { id: 219, name: "Turmeric Powder", teluguName: "‡∞™‡∞∏‡±Å‡∞™‡±Å ‡∞™‡±ä‡∞°‡∞ø", price: 60, unit: "200g", category: "POWDERS", img: "./images/" },
        { id: 220, name: "Red Chilli Powder", teluguName: "‡∞Æ‡∞ø‡∞∞‡∞™ ‡∞™‡±ä‡∞°‡∞ø", price: 45, unit: "200g", category: "POWDERS", img: "./images/" },
        { id: 221, name: "Coriander Powder", teluguName: "‡∞ß‡∞®‡∞ø‡∞Ø‡∞æ‡∞≤ ‡∞™‡±ä‡∞°‡∞ø", price: 40, unit: "200g", category: "POWDERS", img: "./images/" },
        { id: 222, name: "Garam Masala", teluguName: "‡∞ó‡∞∞‡∞Ç ‡∞Æ‡∞∏‡∞æ‡∞≤‡∞æ", price: 70, unit: "100g", category: "POWDERS", img: "./images/" },
        { id: 223, name: "Sambar Powder", teluguName: "‡∞∏‡∞æ‡∞Ç‡∞¨‡∞æ‡∞∞‡±ç ‡∞™‡±å‡∞°‡∞∞‡±ç", price: 55, unit: "200g", category: "POWDERS", img: "./images/" },
        { id: 228, name: "Biryani Masala", teluguName: "‡∞¨‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞®‡±Ä ‡∞Æ‡∞∏‡∞æ‡∞≤‡∞æ", price: 80, unit: "100g", category: "POWDERS", img: "./images/" },
        { id: 229, name: "Curry Masala Pack", teluguName: "‡∞ï‡∞∞‡±ç‡∞∞‡±Ä ‡∞Æ‡∞∏‡∞æ‡∞≤‡∞æ", price: 65, unit: "100g", category: "POWDERS", img: "./images/" },
        { id: 230, name: "Basic Spices Pack", teluguName: "‡∞¨‡±á‡∞∏‡∞ø‡∞ï‡±ç ‡∞∏‡±ç‡∞™‡±à‡∞∏‡±Ü‡∞∏‡±ç", price: 45, unit: "Pack", category: "POWDERS", img: "./images/" },
        { id: 231, name: "Cooking Oil (1L)", teluguName: "‡∞µ‡∞Ç‡∞ü ‡∞®‡±Ç‡∞®‡±Ü", price: 120, unit: "1L", category: "POWDERS", img: "./images/" },
        { id: 232, name: "Cooking Oil (500ml)", teluguName: "‡∞µ‡∞Ç‡∞ü ‡∞®‡±Ç‡∞®‡±Ü 500ml", price: 65, unit: "500ml", category: "POWDERS", img: "./images/" },
        
        // --- MILK & DAIRY PRODUCTS (15 items) ---
        { id: 400, name: "Fresh Milk (Full Cream)", teluguName: "‡∞™‡∞æ‡∞≤‡±Å (‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø)", price: 30, unit: "500ml", category: "DAIRY", img: "./images/milk.jpg" },
        { id: 401, name: "Fresh Milk (1 Liter)", teluguName: "‡∞™‡∞æ‡∞≤‡±Å 1 ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç", price: 55, unit: "1L", category: "DAIRY", img: "./images/" },
        { id: 402, name: "Toned Milk", teluguName: "‡∞ü‡±ã‡∞®‡±ç‡∞°‡±ç ‡∞Æ‡∞ø‡∞≤‡±ç‡∞ï‡±ç", price: 26, unit: "500ml", category: "DAIRY", img: "./images/" },
        { id: 404, name: "Curd (Fresh) - Cup", teluguName: "‡∞Æ‡±ã‡∞∏‡∞∞‡±Å ‡∞ï‡∞™‡±ç", price: 15, unit: "200g Cup", category: "DAIRY", img: "./images/" },
        { id: 405, name: "Curd (Fresh) - 500g", teluguName: "‡∞Æ‡±ã‡∞∏‡∞∞‡±Å 500g", price: 35, unit: "500g", category: "DAIRY", img: "./images/" },
        { id: 407, name: "Paneer (Fresh)", teluguName: "‡∞™‡∞®‡±Ä‡∞∞‡±ç", price: 80, halfPrice: 45, unit: "250g", category: "DAIRY", img: "./images/" },
        { id: 408, name: "Paneer (Fresh) - 500g", teluguName: "‡∞™‡∞®‡±Ä‡∞∞‡±ç 500g", price: 150, unit: "500g", category: "DAIRY", img: "./images/" },
        { id: 409, name: "Butter (Amul)", teluguName: "‡∞¨‡∞ü‡±ç‡∞ü‡∞∞‡±ç", price: 60, unit: "100g", category: "DAIRY", img: "./images/" },
        { id: 410, name: "Butter (200g)", teluguName: "‡∞¨‡∞ü‡±ç‡∞ü‡∞∞‡±ç 200g", price: 110, unit: "200g", category: "DAIRY", img: "./images/" },
        { id: 411, name: "Ghee (Pure)", teluguName: "‡∞®‡±Ü‡∞Ø‡±ç‡∞Ø‡∞ø", price: 120, unit: "200ml", category: "DAIRY", img: "./images/" },
        { id: 412, name: "Ghee (Pure) - 500ml", teluguName: "‡∞®‡±Ü‡∞Ø‡±ç‡∞Ø‡∞ø 500ml", price: 280, unit: "500ml", category: "DAIRY", img: "./images/" },
        { id: 413, name: "Cheese Slices", teluguName: "‡∞ö‡±Ä‡∞∏‡±ç ‡∞∏‡±ç‡∞≤‡±à‡∞∏‡±ç", price: 45, unit: "200g Pack", category: "DAIRY", img: "./images/" },
        { id: 414, name: "Lassi (Sweet)", teluguName: "‡∞≤‡∞∏‡±ç‡∞∏‡±Ä", price: 25, unit: "200ml", category: "DAIRY", img: "./images/" },
        
        // --- PANTRY ESSENTIALS (Items needed for combos) ---
        { id: 500, name: "Mixed Jam (200g)", teluguName: "‡∞Æ‡∞ø‡∞ï‡±ç‡∞∏‡±ç‡∞°‡±ç ‡∞ú‡∞æ‡∞Æ‡±ç", price: 35, unit: "200g", category: "DAIRY", img: "./images/" },
        { id: 501, name: "Tea Powder (250g)", teluguName: "‡∞ü‡±Ä ‡∞™‡±å‡∞°‡∞∞‡±ç", price: 45, unit: "250g", category: "DAIRY", img: "./images/" },
        { id: 502, name: "Sugar (1kg)", teluguName: "‡∞∏‡∞ï‡±ç‡∞ï‡∞∞‡∞æ", price: 50, unit: "1kg", category: "DAIRY", img: "./images/" },
        { id: 503, name: "Sugar (500g)", teluguName: "‡∞∏‡∞ï‡±ç‡∞ï‡∞∞‡∞æ 500g", price: 28, unit: "500g", category: "DAIRY", img: "./images/" },
        { id: 504, name: "Biscuits (200g)", teluguName: "‡∞¨‡∞ø‡∞∏‡±ç‡∞ï‡±Ü‡∞ü‡±ç‡∞∏‡±ç", price: 25, unit: "200g Pack", category: "DAIRY", img: "./images/" },
        { id: 505, name: "Tamarind (100g)", teluguName: "‡∞ö‡∞ø‡∞Ç‡∞§‡∞™‡∞Ç‡∞°‡±Å", price: 20, unit: "100g", category: "DAIRY", img: "./images/" },

        
        // --- SNACK ITEMS (High margin impulse purchases) ---
        { id: 600, name: "Lays Chips (50g)", teluguName: "‡∞≤‡±á‡∞∏‡±ç ‡∞ö‡∞ø‡∞™‡±ç‡∞∏‡±ç", price: 20, unit: "50g", category: "SNACKS", img: "./images/" },
        { id: 601, name: "Kurkure (60g)", teluguName: "‡∞ï‡±Å‡∞∞‡±ç‡∞ï‡±Å‡∞∞‡±á", price: 20, unit: "60g", category: "SNACKS", img: "./images/" },
        { id: 602, name: "Bingo Chips (52g)", teluguName: "‡∞¨‡∞ø‡∞Ç‡∞ó‡±ã ‡∞ö‡∞ø‡∞™‡±ç‡∞∏‡±ç", price: 20, unit: "52g", category: "SNACKS", img: "./images/" },
        { id: 603, name: "Haldiram Namkeen (200g)", teluguName: "‡∞π‡∞≤‡±ç‡∞¶‡±Ä‡∞∞‡∞æ‡∞Æ‡±ç ‡∞®‡∞Æ‡±ç‡∞ï‡±Ä‡∞®‡±ç", price: 45, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 604, name: "Mixture (Local) 250g", teluguName: "‡∞Æ‡∞ø‡∞ï‡±ç‡∞ö‡∞∞‡±ç", price: 35, unit: "250g", category: "SNACKS", img: "./images/" },
        { id: 605, name: "Popcorn (Ready) 100g", teluguName: "‡∞™‡∞æ‡∞™‡±ç‡∞ï‡∞æ‡∞∞‡±ç‡∞®‡±ç", price: 25, unit: "100g", category: "SNACKS", img: "./images/" },
        { id: 606, name: "Peanuts (Roasted) 200g", teluguName: "‡∞µ‡±á‡∞∞‡±Å‡∞∂‡±Ü‡∞®‡∞ó‡∞≤‡±Å", price: 30, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 607, name: "Murukku (Local) 200g", teluguName: "‡∞Æ‡±Å‡∞∞‡±Å‡∞ï‡±ç‡∞ï‡±Å", price: 40, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 608, name: "Banana Chips 150g", teluguName: "‡∞Ö‡∞∞‡∞ü‡∞ø ‡∞ö‡∞ø‡∞™‡±ç‡∞∏‡±ç", price: 35, unit: "150g", category: "SNACKS", img: "./images/" },
        { id: 609, name: "Chakli (Homemade) 200g", teluguName: "‡∞ö‡∞ï‡±ç‡∞≤‡±Ä", price: 45, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 610, name: "Sev (Bhujia) 200g", teluguName: "‡∞∏‡±á‡∞µ‡±ç", price: 40, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 611, name: "Chivda Mix 200g", teluguName: "‡∞ö‡∞ø‡∞µ‡±ç‡∞°‡∞æ", price: 38, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 612, name: "Samosa (2pcs)", teluguName: "‡∞∏‡∞Æ‡±ã‡∞∏‡∞æ", price: 25, unit: "2pcs", category: "SNACKS", img: "./images/" },
        { id: 613, name: "Pakoda Mix 250g", teluguName: "‡∞™‡∞ï‡±ã‡∞°‡∞æ ‡∞Æ‡∞ø‡∞ï‡±ç‡∞∏‡±ç", price: 42, unit: "250g", category: "SNACKS", img: "./images/" },
        { id: 614, name: "Khakhra (Gujarati) 200g", teluguName: "‡∞ñ‡∞æ‡∞ñ‡±ç‡∞∞‡∞æ", price: 35, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 615, name: "Chocolates (Assorted) 5pcs", teluguName: "‡∞ö‡∞æ‡∞ï‡∞≤‡±á‡∞ü‡±ç‡∞∏‡±ç", price: 50, unit: "5pcs", category: "SNACKS", img: "./images/" },
        { id: 616, name: "Mathri (Punjabi) 200g", teluguName: "‡∞Æ‡∞•‡±ç‡∞∞‡±Ä", price: 40, unit: "200g", category: "SNACKS", img: "./images/" },
        { id: 617, name: "Maggi Noodles (Single)", teluguName: "‡∞Æ‡∞æ‡∞ó‡±Ä ‡∞®‡±Ç‡∞°‡∞≤‡±ç‡∞∏‡±ç", price: 15, unit: "1 Pack", category: "SNACKS", img: "./images/" },
        { id: 618, name: "Maggi Noodles (4 Pack)", teluguName: "‡∞Æ‡∞æ‡∞ó‡±Ä 4 ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 60, unit: "4 Pack", category: "SNACKS", img: "./images/" },

        // --- PERSONAL CARE (Non-Medical) ---
        { id: 700, name: "Sanitary Pads (Regular)", teluguName: "‡∞∂‡∞æ‡∞®‡∞ø‡∞ü‡∞∞‡±Ä ‡∞™‡±ç‡∞Ø‡∞æ‡∞°‡±ç‡∞∏‡±ç", price: 45, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 701, name: "Sanitary Pads (Large)", teluguName: "‡∞≤‡∞æ‡∞∞‡±ç‡∞ú‡±ç ‡∞™‡±ç‡∞Ø‡∞æ‡∞°‡±ç‡∞∏‡±ç", price: 55, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 702, name: "Sanitary Pads (XL)", teluguName: "XL ‡∞™‡±ç‡∞Ø‡∞æ‡∞°‡±ç‡∞∏‡±ç", price: 65, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 703, name: "Panty Liners", teluguName: "‡∞™‡∞æ‡∞Ç‡∞ü‡±Ä ‡∞≤‡±à‡∞®‡∞∞‡±ç‡∞∏‡±ç", price: 35, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 704, name: "Condoms (Pack of 3)", teluguName: "‡∞ï‡∞Ç‡∞°‡±ã‡∞Æ‡±ç‡∞∏‡±ç", price: 25, unit: "3 Pack", category: "PERSONAL", img: "./images/" },
        { id: 705, name: "Condoms (Pack of 10)", teluguName: "‡∞ï‡∞Ç‡∞°‡±ã‡∞Æ‡±ç‡∞∏‡±ç 10", price: 75, unit: "10 Pack", category: "PERSONAL", img: "./images/" },
        { id: 706, name: "Pregnancy Test Kit", teluguName: "‡∞™‡±ç‡∞∞‡±Ü‡∞ó‡±ç‡∞®‡±Ü‡∞®‡±ç‡∞∏‡±Ä ‡∞ü‡±Ü‡∞∏‡±ç‡∞ü‡±ç", price: 45, unit: "Kit", category: "PERSONAL", img: "./images/" },
        
        // --- FACE CARE ---
        { id: 707, name: "Face Wash (Daily Cleansing)", teluguName: "‡∞´‡±á‡∞∏‡±ç ‡∞µ‡∞æ‡∞∑‡±ç", price: 85, unit: "100ml", category: "PERSONAL", img: "./images/" },
        { id: 708, name: "Face Scrub (Exfoliating)", teluguName: "‡∞´‡±á‡∞∏‡±ç ‡∞∏‡±ç‡∞ï‡±ç‡∞∞‡∞¨‡±ç", price: 95, unit: "75ml", category: "PERSONAL", img: "./images/" },
        { id: 709, name: "Moisturizer (Vitamin C)", teluguName: "‡∞Æ‡∞æ‡∞Ø‡∞ø‡∞∂‡±ç‡∞ö‡∞∞‡±à‡∞ú‡∞∞‡±ç", price: 120, unit: "50ml", category: "PERSONAL", img: "./images/" },
        { id: 710, name: "Hyaluronic Acid Serum", teluguName: "‡∞π‡±à‡∞≤‡±Å‡∞∞‡∞æ‡∞®‡∞ø‡∞ï‡±ç ‡∞∏‡±Ä‡∞∞‡∞Æ‡±ç", price: 180, unit: "30ml", category: "PERSONAL", img: "./images/" },
        { id: 711, name: "Peel-off Face Mask", teluguName: "‡∞™‡±Ä‡∞≤‡±ç-‡∞Ü‡∞´‡±ç ‡∞Æ‡∞æ‡∞∏‡±ç‡∞ï‡±ç", price: 65, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 712, name: "Facial Kit (Weekly Glow)", teluguName: "‡∞´‡±á‡∞∑‡∞ø‡∞Ø‡∞≤‡±ç ‡∞ï‡∞ø‡∞ü‡±ç", price: 150, unit: "Kit", category: "PERSONAL", img: "./images/" },
        
        // --- HAIR CARE ---
        { id: 713, name: "Hair Oil (Coconut)", teluguName: "‡∞ú‡±Å‡∞ü‡±ç‡∞ü‡±Å ‡∞®‡±Ç‡∞®‡±Ü", price: 75, unit: "200ml", category: "PERSONAL", img: "./images/" },
        { id: 714, name: "Hair Oil (Almond)", teluguName: "‡∞¨‡∞æ‡∞¶‡∞Ç ‡∞®‡±Ç‡∞®‡±Ü", price: 95, unit: "200ml", category: "PERSONAL", img: "./images/" },
        { id: 715, name: "Shampoo (Anti-Dandruff)", teluguName: "‡∞∑‡∞æ‡∞Ç‡∞™‡±Ç", price: 110, unit: "200ml", category: "PERSONAL", img: "./images/" },
        { id: 716, name: "Conditioner (Nourishing)", teluguName: "‡∞ï‡∞Ç‡∞°‡∞ø‡∞∑‡∞®‡∞∞‡±ç", price: 125, unit: "200ml", category: "PERSONAL", img: "./images/" },
        { id: 717, name: "Hair Spa Cream", teluguName: "‡∞π‡±Ü‡∞Ø‡∞ø‡∞∞‡±ç ‡∞∏‡±ç‡∞™‡∞æ ‡∞ï‡±ç‡∞∞‡±Ä‡∞Æ‡±ç", price: 140, unit: "150ml", category: "PERSONAL", img: "./images/" },
        
        // --- HAIR COLOR & MEHENDI ---
        { id: 718, name: "Mehendi (Natural Henna)", teluguName: "‡∞Æ‡±Ü‡∞π‡∞Ç‡∞¶‡∞ø", price: 45, unit: "100g", category: "PERSONAL", img: "./images/" },
        { id: 719, name: "Hair Color (Brown)", teluguName: "‡∞π‡±Ü‡∞Ø‡∞ø‡∞∞‡±ç ‡∞ï‡∞≤‡∞∞‡±ç ‡∞¨‡±ç‡∞∞‡±å‡∞®‡±ç", price: 85, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 720, name: "Hair Color (Black)", teluguName: "‡∞π‡±Ü‡∞Ø‡∞ø‡∞∞‡±ç ‡∞ï‡∞≤‡∞∞‡±ç ‡∞¨‡±ç‡∞≤‡∞æ‡∞ï‡±ç", price: 85, unit: "Pack", category: "PERSONAL", img: "./images/" },
        { id: 721, name: "Mehendi Cone (Ready)", teluguName: "‡∞Æ‡±Ü‡∞π‡∞Ç‡∞¶‡∞ø ‡∞ï‡±ã‡∞®‡±ç", price: 25, unit: "3 Pcs", category: "PERSONAL", img: "./images/" },
        
        // --- PARTY SUPPLIES ---
        { id: 722, name: "Birthday Decoration Kit", teluguName: "‡∞™‡±Å‡∞ü‡±ç‡∞ü‡∞ø‡∞®‡∞∞‡±ã‡∞ú‡±Å ‡∞Ö‡∞≤‡∞Ç‡∞ï‡∞∞‡∞£ ‡∞ï‡∞ø‡∞ü‡±ç", price: 150, unit: "Kit", category: "PARTY", img: "./images/" },
        { id: 723, name: "Happy Birthday Cutouts", teluguName: "‡∞π‡±ç‡∞Ø‡∞æ‡∞™‡±Ä ‡∞¨‡∞∞‡±ç‡∞§‡±ç‡∞°‡±á ‡∞ï‡∞ü‡±ç‡∞Ö‡∞µ‡±Å‡∞ü‡±ç‡∞∏‡±ç", price: 45, unit: "Pack", category: "PARTY", img: "./images/" },
        { id: 724, name: "Birthday Sash (Single)", teluguName: "‡∞¨‡∞∞‡±ç‡∞§‡±ç‡∞°‡±á ‡∞∏‡∞æ‡∞∑‡±ç", price: 35, unit: "Pc", category: "PARTY", img: "./images/" },
        { id: 725, name: "Birthday Sash (Pack of 3)", teluguName: "‡∞¨‡∞∞‡±ç‡∞§‡±ç‡∞°‡±á ‡∞∏‡∞æ‡∞∑‡±ç ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±ç", price: 85, unit: "3 Pack", category: "PARTY", img: "./images/" },
        { id: 726, name: "Foil Balloons (Animal Theme)", teluguName: "‡∞´‡∞æ‡∞Ø‡∞ø‡∞≤‡±ç ‡∞¨‡±Ü‡∞≤‡±Ç‡∞®‡±ç‡∞∏‡±ç ‡∞ú‡∞Ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å", price: 120, unit: "Pack of 12", category: "PARTY", img: "./images/" },
        { id: 727, name: "Foil Balloons (Jungle Theme)", teluguName: "‡∞´‡∞æ‡∞Ø‡∞ø‡∞≤‡±ç ‡∞¨‡±Ü‡∞≤‡±Ç‡∞®‡±ç‡∞∏‡±ç ‡∞Ö‡∞°‡∞µ‡∞ø", price: 120, unit: "Pack of 12", category: "PARTY", img: "./images/" },
        { id: 728, name: "Happy Birthday Letter Balloons", teluguName: "‡∞π‡±ç‡∞Ø‡∞æ‡∞™‡±Ä ‡∞¨‡∞∞‡±ç‡∞§‡±ç‡∞°‡±á ‡∞≤‡±Ü‡∞ü‡∞∞‡±ç ‡∞¨‡±Ü‡∞≤‡±Ç‡∞®‡±ç‡∞∏‡±ç", price: 95, unit: "Pack of 12", category: "PARTY", img: "./images/" },
        { id: 729, name: "Party Goggles (Themed)", teluguName: "‡∞™‡∞æ‡∞∞‡±ç‡∞ü‡±Ä ‡∞ó‡∞æ‡∞ó‡±Å‡∞≤‡±ç‡∞∏‡±ç", price: 65, unit: "Pack of 6", category: "PARTY", img: "./images/" },
        { id: 730, name: "Tableware Set (Plates & Cups)", teluguName: "‡∞ü‡±á‡∞¨‡±Å‡∞≤‡±ç‡∞µ‡±á‡∞∞‡±ç ‡∞∏‡±Ü‡∞ü‡±ç", price: 85, unit: "Set", category: "PARTY", img: "./images/" },
        { id: 731, name: "Party Napkins with Caps", teluguName: "‡∞™‡∞æ‡∞∞‡±ç‡∞ü‡±Ä ‡∞®‡∞æ‡∞™‡±ç‡∞ï‡∞ø‡∞®‡±ç‡∞∏‡±ç ‡∞ï‡±ç‡∞Ø‡∞æ‡∞™‡±ç‡∞∏‡±ç", price: 45, unit: "Pack", category: "PARTY", img: "./images/" },
        { id: 732, name: "Return Gifts (Stars)", teluguName: "‡∞∞‡∞ø‡∞ü‡∞∞‡±ç‡∞®‡±ç ‡∞ó‡∞ø‡∞´‡±ç‡∞ü‡±ç‡∞∏‡±ç ‡∞®‡∞ï‡±ç‡∞∑‡∞§‡±ç‡∞∞‡∞æ‡∞≤‡±Å", price: 75, unit: "Pack of 10", category: "PARTY", img: "./images/" },
        { id: 733, name: "Return Gifts (Hearts)", teluguName: "‡∞∞‡∞ø‡∞ü‡∞∞‡±ç‡∞®‡±ç ‡∞ó‡∞ø‡∞´‡±ç‡∞ü‡±ç‡∞∏‡±ç ‡∞π‡∞æ‡∞∞‡±ç‡∞ü‡±ç‡∞∏‡±ç", price: 75, unit: "Pack of 10", category: "PARTY", img: "./images/" },
        { id: 734, name: "Return Gifts (Butterflies)", teluguName: "‡∞∞‡∞ø‡∞ü‡∞∞‡±ç‡∞®‡±ç ‡∞ó‡∞ø‡∞´‡±ç‡∞ü‡±ç‡∞∏‡±ç ‡∞∏‡±Ä‡∞§‡∞æ‡∞ï‡±ã‡∞ï‡∞ö‡∞ø‡∞≤‡±Å‡∞ï‡∞≤‡±Å", price: 80, unit: "Pack of 10", category: "PARTY", img: "./images/" },
        { id: 735, name: "Party Props Mix", teluguName: "‡∞™‡∞æ‡∞∞‡±ç‡∞ü‡±Ä ‡∞™‡±ç‡∞∞‡∞æ‡∞™‡±ç‡∞∏‡±ç ‡∞Æ‡∞ø‡∞ï‡±ç‡∞∏‡±ç", price: 95, unit: "Pack", category: "PARTY", img: "./images/" },
    ];

    let cart = {}; 
    let activeCategory = 'ALL';
    const BUSINESS_PHONE = "917702907454"; 
    const DELIVERY_FEE = 20;
    const MIN_ORDER = 100;
    
    let orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
    let adminTaps = 0; // Counter for admin access
    
    // Device detection and responsive utilities
    const deviceInfo = {
        isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
        isIOS: /iPad|iPhone|iPod/.test(navigator.userAgent),
        isAndroid: /Android/.test(navigator.userAgent),
        isTablet: /(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(navigator.userAgent),
        screenWidth: window.innerWidth,
        screenHeight: window.innerHeight,
        pixelRatio: window.devicePixelRatio || 1
    };
    
    // Add device classes to body for CSS targeting
    function addDeviceClasses() {
        const body = document.body;
        if (deviceInfo.isMobile) body.classList.add('is-mobile');
        if (deviceInfo.isIOS) body.classList.add('is-ios');
        if (deviceInfo.isAndroid) body.classList.add('is-android');
        if (deviceInfo.isTablet) body.classList.add('is-tablet');
        if (deviceInfo.screenWidth <= 320) body.classList.add('is-small-screen');
        if (deviceInfo.pixelRatio >= 2) body.classList.add('is-retina');
    }
    
    // Generate unique order ID
    function generateOrderId() {
        const timestamp = Date.now();
        const random = Math.floor(Math.random() * 1000);
        return `NK${timestamp.toString().slice(-6)}${random.toString().padStart(3, '0')}`;
    }
    


    const getProduct = (id) => products.find(p => p.id === id);

    const formatQtyDisplay = (qty, unit) => {
        const cleanUnit = unit.replace(' (950g-1000g)', '').replace(' (450g-500g)', '');
        const isKgUnit = cleanUnit === 'Kg';
        
        if (isKgUnit && qty === 0.5) {
            return '500g';
        }
        
        const formattedQty = parseFloat(qty).toFixed(1);
        if (formattedQty.endsWith('.0')) {
            return `${Math.round(qty)} ${cleanUnit}`;
        }
        
        return `${formattedQty} ${cleanUnit}`;
    };

    const calculateItemCost = (id, qty) => {
        const p = getProduct(id);
        if (!p) return 0;
        const isKgItem = p.unit.includes('Kg');
        
        // Handle items priced per Kg where a 0.5Kg option exists and has a specific halfPrice
        if (isKgItem && p.halfPrice) {
            if (qty === 0.5) { // If quantity is exactly 0.5, use the special halfPrice
                 return p.halfPrice;
            } else { // For all other quantities (e.g., 1, 1.5, 2), calculate based on the full kg price
                return p.price * qty;
            }
        }
        return p.price * qty;
    }

    function checkSavedDetails() {
        // Initialize device detection
        addDeviceClasses();
        
        // Show loading first
        document.getElementById('view-loading').classList.remove('hide');
        
        setTimeout(() => {
            document.getElementById('view-loading').classList.add('hide');
            
            const savedName = localStorage.getItem('custName');
            const savedPhone = localStorage.getItem('custPhone');
            const savedAddress = localStorage.getItem('custAddress');
            const profileCreated = localStorage.getItem('profileCreated');
            
            // Load saved cart
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                try {
                    const tempCart = JSON.parse(savedCart);
                    cart = {};
                    Object.keys(tempCart).forEach(id => {
                        const newId = Number(id);
                        const qty = tempCart[id];
                        if (qty > 0) {
                            cart[newId] = { qty: qty, cost: calculateItemCost(newId, qty) };
                        }
                    });
                } catch (e) {
                    console.error("Error loading cart:", e);
                    cart = {};
                }
            } else {
                cart = {};
            }
            
            if (savedName && savedPhone && savedAddress && profileCreated === 'true') {
                // Returning customer - skip data form, show confirmation page directly
                document.getElementById('view-details').classList.add('hide');
                
                // Update greeting for returning customer
                const firstName = savedName.split(' ')[0];
                document.getElementById('welcomeGreeting').textContent = `${getTimeBasedGreeting()}, ${firstName}! Welcome back to Nekta!`;
                
                // Show confirmation page
                document.getElementById('view-confirmation').classList.remove('hide');
            } else {
                // New customer - show data form first
                document.getElementById('view-details').classList.remove('hide');
                document.getElementById('view-confirmation').classList.add('hide');
            }
        }, 2000); // 2 second loading
    }

    // Remove old location permission functions - not needed anymore

    function showProfileConfirmation() {
        const name = document.getElementById('initialName').value.trim();
        const phone = document.getElementById('initialPhone').value.trim();
        const email = document.getElementById('initialEmail').value.trim();
        const address = document.getElementById('initialAddress').value.trim();
        const error = document.getElementById('detailsError');

        if (!name || !phone || !address || phone.length < 10 || isNaN(phone)) {
            error.classList.remove('hide');
            error.textContent = 'Please fill in all required fields correctly (Name, Phone 10 digits, Address)';
            return;
        }

        error.classList.add('hide');
        
        // SAVE DATA IMMEDIATELY
        localStorage.setItem('custName', name);
        localStorage.setItem('custPhone', phone);
        localStorage.setItem('custEmail', email);
        localStorage.setItem('custAddress', address);
        
        // Update greeting with current time and customer name
        const firstName = name.split(' ')[0]; // Get first name only
        document.getElementById('welcomeGreeting').textContent = `${getTimeBasedGreeting()}, ${firstName}! Welcome to Nekta!`;
        
        // Hide details view and show confirmation
        document.getElementById('view-details').classList.add('hide');
        document.getElementById('view-confirmation').classList.remove('hide');
        
        // Reset the editing flag
        editingFromConfirmation = false;
        
        showNotification('‚úÖ Profile data saved!', 'success');
    }
    
    // Track if editing from confirmation page
    let editingFromConfirmation = false;
    
    // Get time-based greeting
    function getTimeBasedGreeting() {
        const hour = new Date().getHours();
        if (hour >= 5 && hour < 12) {
            return 'Good Morning';
        } else if (hour >= 12 && hour < 17) {
            return 'Good Afternoon';
        } else if (hour >= 17 && hour < 21) {
            return 'Good Evening';
        } else {
            return 'Hello';
        }
    }
    
    function confirmAndStartShopping() {
        // Data is already saved in showProfileConfirmation
        localStorage.setItem('profileCreated', 'true');
        
        // Hide confirmation and start shopping
        document.getElementById('view-confirmation').classList.add('hide');
        
        showNotification('üéâ Welcome to Nekta! Happy shopping!', 'success');
        initializeUXFeatures();
        showCurrentView('home');
    }
    
    function editProfile() {
        // Set flag that we're editing from confirmation page
        editingFromConfirmation = true;
        
        // Pre-fill the form with current data
        document.getElementById('initialName').value = localStorage.getItem('custName') || '';
        document.getElementById('initialPhone').value = localStorage.getItem('custPhone') || '';
        document.getElementById('initialEmail').value = localStorage.getItem('custEmail') || '';
        document.getElementById('initialAddress').value = localStorage.getItem('custAddress') || '';
        
        // Go back to details form
        document.getElementById('view-confirmation').classList.add('hide');
        document.getElementById('view-details').classList.remove('hide');
    }

    function showCurrentView(viewName) {
        const views = ['details', 'home', 'about', 'contact', 'cart'];
        views.forEach(view => {
            const viewEl = document.getElementById(`view-${view}`);
            if (viewEl) viewEl.classList.add('hide');
        });

        document.querySelectorAll('.nav-item').forEach(btn => {
            btn.classList.remove('active', 'text-green-600');
            btn.classList.add('text-gray-500');
            const icon = btn.querySelector('.nav-icon');
            if (icon) {
                icon.classList.remove('bg-green-100');
                icon.classList.add('bg-gray-100');
            }
        });

        const targetView = document.getElementById(`view-${viewName}`);
        if (targetView) targetView.classList.remove('hide');

        if (viewName === 'home') {
            const homeBtn = document.querySelector('.nav-item[onclick="showCurrentView(\'home\')"]');
            if (homeBtn) {
                homeBtn.classList.add('active', 'text-green-600');
                const homeIcon = homeBtn.querySelector('.nav-icon');
                if (homeIcon) {
                    homeIcon.classList.remove('bg-gray-100');
                    homeIcon.classList.add('bg-green-100');
                }
            }
            // Reset to ALL category when going to home
            activeCategory = 'ALL';
            document.querySelectorAll('.category-btn').forEach(btn => {
                if (btn.dataset.category === 'ALL') {
                    btn.className = 'category-btn bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2.5 rounded-2xl text-xs font-bold whitespace-nowrap flex items-center gap-2 shadow-lg border border-green-500/30 transform scale-105';
                } else {
                    btn.className = 'category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300';
                }
            });
            updateMiniCart();
            renderProducts(activeCategory);
        } else if (viewName === 'cart') {
            const cartBtn = document.querySelector('.nav-item[onclick="showCart()"]');
            if (cartBtn) {
                cartBtn.classList.add('active', 'text-green-600');
                const cartIcon = cartBtn.querySelector('.nav-icon');
                if (cartIcon) {
                    cartIcon.classList.remove('bg-gray-100');
                    cartIcon.classList.add('bg-green-100');
                }
            }
            renderCart();
 
        } else if (viewName === 'details') {
            const detailsView = document.getElementById('view-details');
            const bottomNav = document.getElementById('bottom-nav');
            if (detailsView) detailsView.classList.remove('hide');
            if (bottomNav) bottomNav.classList.add('hide'); 
        } else {
            const navButton = document.querySelector(`.nav-item[onclick="showCurrentView('${viewName}')"]`);
            if (navButton) {
                navButton.classList.add('active', 'text-green-600');
                const navIcon = navButton.querySelector('.nav-icon');
                if (navIcon) {
                    navIcon.classList.remove('bg-gray-100');
                    navIcon.classList.add('bg-green-100');
                }
            }
        }
        
        if (viewName !== 'details') {
            const bottomNav = document.getElementById('bottom-nav');
            if (bottomNav) bottomNav.classList.remove('hide');
        }
        window.scrollTo(0, 0); 
    }

    function showCart() { showCurrentView('cart'); }
    
    function setActiveCategory(button, category) {
        activeCategory = category;
        document.querySelectorAll('.category-btn').forEach(btn => {
            if (btn.dataset.category === category) {
                btn.className = 'category-btn bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2.5 rounded-2xl text-xs font-bold whitespace-nowrap flex items-center gap-2 shadow-lg border border-green-500/30 transform scale-105';
            } else {
                btn.className = 'category-btn bg-white text-gray-700 px-4 py-2.5 rounded-2xl text-xs font-semibold whitespace-nowrap flex items-center gap-2 shadow-md border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300';
            }
        });
        renderProducts(category);
        const searchInput = document.getElementById('searchInput');
        if (searchInput) searchInput.value = ''; 
    }

    function filterProducts() {
        const searchInput = document.getElementById('searchInput');
        if (!searchInput) return;
        
        const query = searchInput.value.toLowerCase();
        const suggestions = document.getElementById('searchSuggestions');
        
        // Hide suggestions when typing
        if (query.length > 0 && suggestions) {
            suggestions.classList.add('hide');
        }
        
        // Reset to ALL category when searching
        if (query.length > 0) {
            activeCategory = 'ALL';
            // Update category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                if (btn.dataset.category === 'ALL') {
                    btn.className = 'category-btn bg-green-600 text-white px-3 py-2 rounded-full text-xs font-medium whitespace-nowrap flex items-center gap-1';
                } else {
                    btn.className = 'category-btn bg-gray-200 text-gray-600 px-3 py-2 rounded-full text-xs font-medium whitespace-nowrap flex items-center gap-1';
                }
            });
        }
        
        renderProducts(activeCategory, query);
    }

    function renderProducts(category, query = '') {
        
        const grid = document.getElementById('product-grid');
        const filteredProducts = products.filter(p => {
            const matchesCategory = (category === 'ALL' && p.category !== 'STAPLES') || p.category === category;
            const aliasesText = (p.aliases || []).join(' ').toLowerCase();
            const teluguLower = (p.teluguName || '').toLowerCase();
            const matchesSearch = query === '' || p.name.toLowerCase().includes(query) || p.unit.toLowerCase().includes(query) || aliasesText.includes(query) || teluguLower.includes(query);
            return matchesCategory && matchesSearch;
        }).sort((a, b) => a.price - b.price);

        grid.innerHTML = filteredProducts.map(p => `
            <div id="product-card-${p.id}" class="bg-white p-2 rounded-xl shadow-md border border-gray-100 flex flex-col h-full transition duration-150 hover:shadow-lg ${p.category === 'STAPLES' ? 'border-red-200 bg-gradient-to-br from-red-50 to-orange-50' : ''} ${p.outOfStock ? 'opacity-60' : ''}">
                <div class="h-28 bg-gray-100 mb-2 rounded-lg flex items-center justify-center overflow-hidden relative flex-shrink-0">` +
                    // If image path is missing or just a directory, show placeholder. Otherwise, show image.
                    `${(p.img && p.img.includes('.')) ? `<img src="${p.img}" class="w-full h-full object-cover ${p.outOfStock ? 'grayscale' : ''}" alt="${p.name}" onerror="this.parentElement.innerHTML = '<div class=\\'image-placeholder w-full h-full text-xs\\'>${p.name}</div>';">` : `<div class="image-placeholder w-full h-full text-xs">${p.name}</div>`}` +
                `
                    ${p.savings ? `<div class="absolute top-1 right-1 bg-red-500 text-white text-xs font-bold px-1 py-0.5 rounded-full">${p.savings}</div>` : ''}
                    ${p.outOfStock ? `<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"><span class="bg-red-500 text-white px-2 py-1 rounded text-xs font-bold">OUT OF STOCK</span></div>` : ''}
                </div>
                <div class="flex-1 flex flex-col justify-between">
                    <div>
                        <h3 class="font-bold text-gray-800 text-xs leading-tight mb-1 line-clamp-2">${p.name}</h3>
                        <h4 class="text-xs text-green-700 font-bold italic truncate">${p.teluguName}</h4>
                        ${p.description ? `<p class="text-xs text-gray-600 mt-1 leading-tight">${p.description}</p>` : ''}
                        ${p.unit.includes('Kg') ? '<p class="text-xs text-gray-400 mt-0.5 leading-tight">AW: ' + (p.halfPrice ? '450-500g for ¬ΩKG, 950-1000g for 1KG' : '950-1000g for 1KG') + '</p>' : ''}
                    </div>
                    <div class="mt-1">
                        ${p.originalPrice ? `<span class="text-xs text-gray-400 line-through">‚Çπ${p.originalPrice}</span>` : ''}
                        <div class="text-sm font-bold ${p.category === 'STAPLES' ? 'text-red-600' : 'text-green-600'} leading-tight">‚Çπ${p.price}/${p.unit.replace(' (950g-1000g)', '').replace(' (450g-500g)', '')}</div>
                    </div>
                    <div class="mt-2" id="controls-${p.id}">
                         ${getAddButtonHtml(p.id)}
                    </div>
                </div>
            </div>
        `).join('');
    }

    function getAddButtonHtml(id) {
        const qty = (cart[id] && cart[id].qty) || 0;
        const product = getProduct(id);
        const step = product.unit.includes('Kg') ? 0.5 : 1; // 0.5kg steps for kg items
        
        // If out of stock, show disabled button
        if (product.outOfStock) {
            return `<button class="w-full bg-gray-300 text-gray-500 font-bold text-sm py-2 rounded shadow-sm uppercase cursor-not-allowed" disabled>OUT OF STOCK</button>`;
        }
        
        if (qty === 0) {
            if (product.unit.includes('Kg') && product.halfPrice) {
                const buttonColor = product.category === 'STAPLES' ? 'border-red-500 text-red-600 hover:bg-red-50' : 'border-green-500 text-green-600 hover:bg-green-50';
                return `
                    <div class="flex gap-1 w-full">
                        <button onclick="updateQty(${id}, 0.5);" class="w-1/2 bg-white ${buttonColor} font-bold text-xs py-2 rounded shadow-sm order-btn">500g</button>
                        <button onclick="updateQty(${id}, 1);" class="w-1/2 bg-white ${buttonColor} font-bold text-xs py-2 rounded shadow-sm order-btn">1Kg</button>
                    </div>
                `;
            }
            const buttonColor = product.category === 'STAPLES' ? 'border-red-500 text-red-600 hover:bg-red-50' : 'border-green-500 text-green-600 hover:bg-green-50';
            return `<button onclick="updateQty(${id}, ${step});" class="w-full bg-white ${buttonColor} font-bold text-sm py-2 rounded shadow-sm uppercase order-btn">ADD</button>`;
        } else {
            const bgColor = product.category === 'STAPLES' ? 'bg-red-500' : 'bg-green-500';
            const hoverColor = product.category === 'STAPLES' ? 'hover:bg-red-600' : 'hover:bg-green-600';
            return `
                <div class="flex items-center ${bgColor} rounded-lg text-white w-full justify-between px-2 py-1 shadow-md">
                    <button onclick="updateQty(${id}, -${step});" class="font-bold p-1 ${hoverColor} rounded-l-lg order-btn">-</button>
                    <span class="text-sm font-bold">${formatQtyDisplay(qty, product.unit)}</span>
                    <button onclick="updateQty(${id}, ${step});" class="font-bold p-1 ${hoverColor} rounded-r-lg order-btn">+</button>
                </div>
            `;
        }
    }

    function updateQty(id, change) {
        const product = getProduct(id);
        if (!product) return;
        if (!cart[id]) cart[id] = { qty: 0, cost: 0 };
        
        let currentQty = cart[id].qty;
        let newQty = (parseFloat(currentQty) * 10 + parseFloat(change) * 10) / 10; 
        newQty = parseFloat(newQty.toFixed(1)); 

        if (newQty <= 0) {
            delete cart[id];
        } else {
            cart[id].qty = newQty;
            cart[id].cost = calculateItemCost(id, newQty);
        }
        
        const cartToStore = {};
        Object.keys(cart).forEach(key => cartToStore[key] = cart[key].qty);
        localStorage.setItem('cart', JSON.stringify(cartToStore));

        const controlsDiv = document.getElementById(`controls-${id}`);
        if (controlsDiv) controlsDiv.innerHTML = getAddButtonHtml(id);
        updateMiniCart();
    }

    function updateMiniCart() {
        let uniqueItems = 0;
        let totalCost = 0;
        Object.keys(cart).forEach(id => {
            const item = cart[id];
            if (item.qty > 0) {
                totalCost += item.cost;
                uniqueItems += 1; 
            }
        });
        
        // Update header cart badge
        const headerCartBadge = document.getElementById('headerCartBadge');
        if (headerCartBadge) {
            headerCartBadge.innerText = uniqueItems;
            if (uniqueItems > 0) headerCartBadge.classList.remove('hide');
            else headerCartBadge.classList.add('hide');
        }
        
        // Update bottom nav cart badge
        const bottomCartBadge = document.getElementById('bottomCartBadge');
        if (bottomCartBadge) {
            bottomCartBadge.innerText = uniqueItems;
            if (uniqueItems > 0) bottomCartBadge.classList.remove('hide');
            else bottomCartBadge.classList.add('hide');
        }
    }

    function renderCart() {
        const container = document.getElementById('cart-items-container');
        let html = '';
        let subtotal = 0;

        document.getElementById('cartCustName').innerText = localStorage.getItem('custName') || 'Name Not Set';
        document.getElementById('cartCustAddress').innerText = localStorage.getItem('custAddress') || 'Address Not Set';
        document.getElementById('cartCustPhone').innerText = 'Phone: ' + (localStorage.getItem('custPhone') || 'Not Set');

        const orderedIds = Object.keys(cart).map(Number).sort((a, b) => a - b);

        orderedIds.forEach(id => {
            const p = getProduct(id);
            const item = cart[id];
            if(p && item.qty > 0) {
                const qty = item.qty;
                const cost = calculateItemCost(id, qty); 
                subtotal += cost;
                const step = (p.unit === 'Kg') ? 0.5 : 1;

                html += `
                    <div class="bg-gradient-to-r from-white to-gray-50 p-3 rounded-xl border border-gray-200/50 shadow-md hover:shadow-lg transition-all duration-300">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg flex items-center justify-center flex-shrink-0">
                                ${p.img ? `<img src="${p.img}" class="w-full h-full object-cover rounded-lg" alt="${p.name}">` : `<div class="text-gray-400 text-xs text-center">${p.name.split(' ')[0]}</div>`}
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="font-bold text-gray-800 text-sm leading-tight">${p.name}</div>
                                <div class="text-xs text-green-700 font-medium italic">${p.teluguName}</div>
                                <div class="flex items-center justify-between mt-1">
                                    <div class="text-xs text-gray-500">‚Çπ${p.price}/${p.unit}</div>
                                    <div class="font-bold text-green-700">‚Çπ${cost.toFixed(2)}</div>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-3 pt-2 border-t border-gray-100">
                            <div class="flex items-center bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg text-white font-bold text-sm">
                                <button onclick="updateQty(${p.id}, -${step}); renderCart();" class="px-3 py-1.5 rounded-l-lg hover:bg-green-600 transition-colors order-btn">
                                    <i class="fas fa-minus text-xs"></i>
                                </button>
                                <span class="px-3 py-1.5 bg-green-600/90 font-bold text-xs">${formatQtyDisplay(qty, p.unit)}</span>
                                <button onclick="updateQty(${p.id}, ${step}); renderCart();" class="px-3 py-1.5 rounded-r-lg hover:bg-green-600 transition-colors order-btn">
                                    <i class="fas fa-plus text-xs"></i>
                                </button>
                            </div>
                            <button onclick="removeItemFromCart(${p.id}); renderCart();" class="text-red-500 hover:text-red-700 text-xs font-medium transition-colors">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }
        });

        if(html === '') {
            html = '<div class="text-center text-gray-400 py-10 bg-white rounded-xl">Your cart is empty. Start adding items from the Home tab!</div>';
            document.getElementById('confirmOrderSection').classList.add('hide');
        } else {
            document.getElementById('confirmOrderSection').classList.remove('hide');
        }
        
        container.innerHTML = html;
        document.getElementById('bill-subtotal').innerText = '‚Çπ' + subtotal.toFixed(2);
        document.getElementById('bill-total').innerText = '‚Çπ' + (subtotal + DELIVERY_FEE).toFixed(2);


    }

    // paymentMethod: 'COD' | 'ONLINE' ; paymentStatus: 'Pending' | 'Paid'
    function sendToWhatsApp(paymentMethod = 'COD', paymentStatus = 'Pending') {
        const name = localStorage.getItem('custName');
        const address = localStorage.getItem('custAddress');
        const phone = localStorage.getItem('custPhone');
        
        if(!name || !address || !phone) {
            // Note: Using a custom modal is recommended instead of alert() for production apps.
            // For simplicity in this single-file context, we'll keep the view navigation logic.
            showCurrentView('details');
            alert("‚ö†Ô∏è Please fill in your name, phone, and address first!"); 
            return;
        }
        if (Object.keys(cart).length === 0) {
            alert("üõí Your cart is empty!");
            showCurrentView('home');
            return;
        }

        let total = 0;
        let orderList = "";
        let itemCounter = 1;
        const orderedIds = Object.keys(cart).map(Number).sort((a, b) => a - b);

        orderedIds.forEach(id => {
            const p = getProduct(id);
            const item = cart[id];
            if(p && item.qty > 0) {
                const cost = calculateItemCost(id, item.qty);
                total += cost;
                orderList += `${itemCounter}. ${p.name} (${formatQtyDisplay(item.qty, p.unit)}) - ‚Çπ${cost.toFixed(2)}\n`;
                itemCounter++;
            }
        });

        const grandTotal = total + DELIVERY_FEE;
        const orderId = generateOrderId();
        
        let whatsappMessage = `*Nekta Order (Kothagudem)*\n`;  
        whatsappMessage += `*Order ID: ${orderId}*\n\n`;

        // No confirmation alerts - direct order processing
        whatsappMessage += `Name: *${name}*\nPhone: *${phone}*\nAddress: *${address}*\n\n`;
        whatsappMessage += `*ORDER LIST:*\n${orderList}`;
        whatsappMessage += `\n*Item Subtotal: ‚Çπ${total.toFixed(2)}*`;
        whatsappMessage += `\nDelivery Fee: ‚Çπ${DELIVERY_FEE}`;
        whatsappMessage += `\n*TOTAL PAYABLE: ‚Çπ${grandTotal.toFixed(2)}*`;
        const deliveryTime = document.getElementById('deliveryTimeSlot')?.value || 'asap';
        const timeSlots = {
            asap: 'ASAP (30-60 mins)',
            morning: 'Morning (8 AM - 12 PM)',
            afternoon: 'Afternoon (12 PM - 4 PM)',
            evening: 'Evening (4 PM - 8 PM)'
        };
        
        whatsappMessage += `\n\n_Payment method: ${paymentMethod} (Status: ${paymentStatus})_`;
        whatsappMessage += `\n_Delivery time: ${timeSlots[deliveryTime]}_`;
        
        // Save order to history
        const orderData = {
            id: orderId,
            items: {},
            total: grandTotal,
            date: new Date().toISOString()
        };
        Object.keys(cart).forEach(id => {
            orderData.items[id] = cart[id].qty;
        });
        orderHistory.push(orderData);
        localStorage.setItem('orderHistory', JSON.stringify(orderHistory.slice(-50))); // Keep last 50 orders

        const whatsappMessageBase = whatsappMessage;
        function openWhatsAppWithLocation(locLink) {
            let whatsappMessageFinal = whatsappMessageBase;
            if (locLink) {
                whatsappMessageFinal += `\n\nLocation: ${locLink}`;
            }
            const whatsappUrl = `https://wa.me/${BUSINESS_PHONE}?text=${encodeURIComponent(whatsappMessageFinal)}`;
            
            // Try multiple methods to ensure WhatsApp opens
            try {
                // Method 1: Direct window.open
                const newWindow = window.open(whatsappUrl, '_blank');
                
                // Check if popup was blocked
                if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                    // Method 2: Create temporary link and click it
                    const tempLink = document.createElement('a');
                    tempLink.href = whatsappUrl;
                    tempLink.target = '_blank';
                    tempLink.rel = 'noopener noreferrer';
                    document.body.appendChild(tempLink);
                    tempLink.click();
                    document.body.removeChild(tempLink);
                }
                
                // Success - process order
                processOrderSuccess();
                
            } catch (error) {
                console.error('WhatsApp open failed:', error);
                // Method 3: Show manual link as fallback
                showWhatsAppFallback(whatsappUrl);
            }
        }
        
        function processOrderSuccess() {
            // Clear cart after successful order
            cart = {};
            localStorage.removeItem('cart');
            updateMiniCart();
            showNotification('üéâ Order sent successfully!');
            
            // Redirect to home page after 2 seconds
            setTimeout(() => {
                showCurrentView('home');
                showNotification('‚úÖ Order received! Continue shopping...');
            }, 2000);
        }
        
        function showWhatsAppFallback(whatsappUrl) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-xl w-full max-w-md p-6">
                    <h3 class="text-xl font-bold mb-4 text-center">üì± Open WhatsApp</h3>
                    <p class="text-gray-600 mb-4 text-center">Click the button below to send your order via WhatsApp:</p>
                    <a href="${whatsappUrl}" target="_blank" class="w-full bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 mb-4 hover:bg-green-600 transition">
                        <i class="fab fa-whatsapp text-xl"></i> Send Order to WhatsApp
                    </a>
                    <button onclick="this.parentElement.parentElement.remove(); processOrderSuccess();" class="w-full bg-gray-200 text-gray-700 py-2 rounded-lg">I've sent the order</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Use saved location if available
        const savedLat = localStorage.getItem('userLat');
        const savedLng = localStorage.getItem('userLng');
        const locationPermissionGranted = localStorage.getItem('locationPermissionGranted');
        
        if (locationPermissionGranted === 'true' && savedLat && savedLng) {
            const mapsLink = `https://maps.google.com/?q=${savedLat},${savedLng}`;
            openWhatsAppWithLocation(mapsLink);
        } else {
            openWhatsAppWithLocation('');
        }
    }

    function openPaymentModal() {
        const modal = document.getElementById('payment-modal');
        const content = document.getElementById('payment-modal-content');
        if (modal) {
            modal.classList.remove('hide');
            setTimeout(() => {
                content.style.transform = 'scale(1)';
                content.style.opacity = '1';
            }, 10);
            
            setupPaymentSelection();
        }
    }
    
    function setupPaymentSelection() {
        const paymentOptions = document.querySelectorAll('input[name="paymentMethod"]');
        const paymentCards = document.querySelectorAll('.payment-card');
        
        paymentOptions.forEach((radio, index) => {
            radio.addEventListener('change', function() {
                // Remove selected state from all cards
                paymentCards.forEach(card => {
                    card.classList.remove('border-green-300', 'bg-green-50', 'shadow-md');
                    card.classList.add('border-gray-200');
                    
                    const indicator = card.querySelector('.radio-indicator');
                    const dot = card.querySelector('.radio-indicator div');
                    indicator.classList.remove('border-green-500');
                    indicator.classList.add('border-gray-300');
                    dot.style.opacity = '0';
                });
                
                // Add selected state to chosen card
                if (this.checked) {
                    const selectedCard = paymentCards[index];
                    selectedCard.classList.remove('border-gray-200');
                    selectedCard.classList.add('border-green-300', 'bg-green-50', 'shadow-md');
                    
                    const indicator = selectedCard.querySelector('.radio-indicator');
                    const dot = selectedCard.querySelector('.radio-indicator div');
                    indicator.classList.remove('border-gray-300');
                    indicator.classList.add('border-green-500');
                    dot.style.opacity = '1';
                }
            });
            
            // Also handle clicks on the card itself
            paymentCards[index].addEventListener('click', function() {
                radio.checked = true;
                radio.dispatchEvent(new Event('change'));
            });
        });
    }

    function closePaymentModal() {
        const modal = document.getElementById('payment-modal');
        const content = document.getElementById('payment-modal-content');
        if (modal) {
            content.style.transform = 'scale(0.95)';
            content.style.opacity = '0';
            setTimeout(() => {
                modal.classList.add('hide');
            }, 200);
        }
    }

    function confirmPaymentAndSend() {
        const methodEl = document.querySelector('input[name="paymentMethod"]:checked');
        const method = methodEl ? methodEl.value : 'COD';

        closePaymentModal();
        
        if (method === 'ONLINE') {
            showUPIPaymentModal();
        } else {
            // For COD, request location first
            requestLocationAndProceed('COD', 'Pending');
        }
    }
    
    function requestLocationAndProceed(paymentMethod, paymentStatus) {
        showNotification('üìç Please share your location for delivery', 'info');
        
        const locationModal = document.createElement('div');
        locationModal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
        locationModal.innerHTML = `
            <div class="bg-white rounded-xl w-full max-w-md p-6 text-center">
                <div class="text-6xl mb-4">üìç</div>
                <h3 class="text-xl font-bold mb-4">Share Your Location</h3>
                <p class="text-gray-600 mb-6">We need your current location to deliver your order accurately.</p>
                <button onclick="getLocationAndOrder('${paymentMethod}', '${paymentStatus}')" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition mb-3">
                    üìç SHARE LOCATION & CONFIRM ORDER
                </button>
                <button onclick="this.parentElement.parentElement.remove()" class="w-full bg-gray-200 text-gray-700 py-2 rounded-lg">Cancel</button>
                <p id="locationError" class="text-red-500 text-center mt-2 text-sm hide"></p>
            </div>
        `;
        document.body.appendChild(locationModal);
    }
    
    function getLocationAndOrder(paymentMethod, paymentStatus) {
        const errorEl = document.querySelector('#locationError');
        errorEl.classList.add('hide');
        
        requestLocationForDelivery()
            .then(location => {
                document.querySelector('.fixed.inset-0').remove();
                showNotification('‚úÖ Location confirmed!', 'success');
                setTimeout(() => {
                    sendToWhatsApp(paymentMethod, paymentStatus);
                }, 500);
            })
            .catch(error => {
                let errorMessage = 'Unable to get location: ';
                if (error.code) {
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += 'Permission denied. Please allow location access.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += 'Location unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage += 'Request timed out.';
                            break;
                    }
                } else {
                    errorMessage += error;
                }
                errorEl.innerText = errorMessage;
                errorEl.classList.remove('hide');
            });
    }

    function showUPIPaymentModal() {
        const modal = document.getElementById('upi-payment-modal');
        if (modal) modal.classList.remove('hide');
        // Calculate total and display in modal
        let cartTotal = 0;
        Object.keys(cart).forEach(id => {
            if (cart[id].qty > 0) cartTotal += cart[id].cost;
        });
        const grandTotal = cartTotal + DELIVERY_FEE;
        document.getElementById('razorpay-amount').innerText = '‚Çπ' + grandTotal.toFixed(2);
    }

    function hideUPIPaymentModal() {
        const modal = document.getElementById('upi-payment-modal');
        if (modal) modal.classList.add('hide');
    }

    function initiateRazorpayPayment() {
        let cartTotal = 0;
        Object.keys(cart).forEach(id => {
            if (cart[id].qty > 0) cartTotal += cart[id].cost;
        });
        const grandTotal = cartTotal + DELIVERY_FEE;
        const amountInPaisa = Math.round(grandTotal * 100);

        const custName = localStorage.getItem('custName');
        const custPhone = localStorage.getItem('custPhone');
        const custEmail = localStorage.getItem('custEmail');

        const razorpayKey = 'rzp_test_1DP5mmOlF5G1ag';
        
        const options = {
            key: razorpayKey,
            amount: amountInPaisa,
            currency: 'INR',
            name: 'Nekta - Kothagudem',
            description: 'Order Payment',
            prefill: {
                name: custName || '',
                contact: custPhone || '',
                email: custEmail || 'customer@nekta.local'
            },
            handler: function(response) {
                hideUPIPaymentModal();
                // After successful payment, request location
                requestLocationAndProceed('ONLINE', 'Paid');
            },
            modal: {
                ondismiss: function() {
                    alert('Payment cancelled. Please try again.');
                }
            },
            theme: {
                color: '#10B981'
            }
        };

        const rzp = new Razorpay(options);
        rzp.on('payment.failed', function(response) {
            alert('Payment failed: ' + response.error.description + '\n\nPlease try again.');
        });
        rzp.open();
    }

    function cancelUPIPayment() {
        hideUPIPaymentModal();
        openPaymentModal(); // Go back to payment method choice
    }
    
    // ===== ADMIN PANEL FUNCTIONS =====
    
    function adminTapCounter() {
        adminTaps++;
        if (adminTaps === 5) {
            showNotification('üîê Admin access unlocked!', 'info');
            setTimeout(() => {
                showAdminPanel();
            }, 1000);
            adminTaps = 0; // Reset counter
        } else if (adminTaps >= 3) {
            showNotification(`Tap ${5 - adminTaps} more times...`, 'info');
        }
        
        // Reset counter after 3 seconds of no taps
        setTimeout(() => {
            adminTaps = 0;
        }, 3000);
    }
    
    function showAdminPanel() {
        showCurrentView('admin');
        loadAdminOrders();
    }
    
    function checkAdminLogin() {
        // SECURITY: This is NOT a secure way to handle passwords.
        // This is a client-side-only placeholder. A real app MUST use a server for authentication.
        const enteredPassword = document.getElementById('admin-password').value;
        const correctPasswordHash = "U2FsdGVkX1/R8A4vJ9j/pP6tZ8bX9w=="; // A very simple "obfuscation", not real security.
        const adminPass = prompt("Enter Admin Password:");

        if (adminPass === "nekta123") { // Replace with a real check
            document.getElementById('admin-login').classList.add('hide');
            document.getElementById('admin-dashboard').classList.remove('hide');
            loadAdminOrders();
            showNotification('‚úÖ Admin access granted!', 'success');
        } else {
            showNotification('Incorrect password!', 'error');
        }
    }
    
    function loadAdminOrders() {
        const ordersList = document.getElementById('admin-orders-list');
        const orderSelect = document.getElementById('order-select');
        
        if (orderHistory.length === 0) {
            ordersList.innerHTML = '<p class="text-gray-500 text-center py-4">No orders yet</p>';
            return;
        }
        
        // Clear previous options
        orderSelect.innerHTML = '<option value="">Select Order</option>';
        
        // Show recent orders
        ordersList.innerHTML = orderHistory.slice(-5).reverse().map((order, index) => {
            const orderNumber = orderHistory.length - index;
            const orderDate = new Date(order.date).toLocaleString('en-IN');
            const orderId = order.id || `Order #${orderNumber}`;
            const status = localStorage.getItem(`order_${orderId}_status`) || 'received';
            const statusEmojis = {
                received: 'üì¶',
                preparing: 'üë®üç≥',
                delivering: 'üöö',
                delivered: '‚úÖ'
            };
            
            // Add to select dropdown
            orderSelect.innerHTML += `<option value="${orderId}">${orderId} - ‚Çπ${order.total.toFixed(2)}</option>`;
            
            return `
                <div class="border border-gray-200 rounded-lg p-3 mb-2">
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-bold">${orderId}</div>
                            <div class="text-sm text-gray-500">${orderDate}</div>
                            <div class="text-sm font-medium text-green-600">‚Çπ${order.total.toFixed(2)}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg">${statusEmojis[status]}</div>
                            <div class="text-xs text-gray-600 capitalize">${status}</div>
                        </div>
                    </div>
                </div>
            `;
        }).join('');
    }
    
    function updateOrderStatus() {
        const orderNumber = document.getElementById('order-select').value;
        const newStatus = document.getElementById('status-select').value;
        
        if (!orderNumber) {
            showNotification('Please select an order!', 'warning');
            return;
        }
        
        // Save status
        localStorage.setItem(`order_${orderNumber}_status`, newStatus);
        
        // Update customer's order tracker if they're viewing it
        updateCustomerOrderTracker(newStatus);
        
        // Refresh admin view
        loadAdminOrders();
        
        const statusNames = {
            received: 'Order Received',
            preparing: 'Preparing',
            delivering: 'Out for Delivery',
            delivered: 'Delivered'
        };
        
        showNotification(`${orderNumber} updated to: ${statusNames[newStatus]}`, 'success');
    }
    
    function updateCustomerOrderTracker(status) {
        const tracker = document.getElementById('orderStatusTracker');
        if (!tracker || tracker.classList.contains('hide')) return;
        
        const status1 = document.getElementById('status1');
        const status2 = document.getElementById('status2');
        const status3 = document.getElementById('status3');
        
        // Reset all statuses
        [status1, status2, status3].forEach(el => {
            el.className = 'w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-500 mb-1';
            el.innerHTML = '<i class="fas fa-clock"></i>';
        });
        
        // Update based on current status
        if (status === 'received' || status === 'preparing' || status === 'delivering' || status === 'delivered') {
            status1.className = 'w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white mb-1';
            status1.innerHTML = '<i class="fas fa-check"></i>';
        }
        
        if (status === 'preparing' || status === 'delivering' || status === 'delivered') {
            status2.className = 'w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white mb-1';
            status2.innerHTML = '<i class="fas fa-check"></i>';
        }
        
        if (status === 'delivering' || status === 'delivered') {
            status3.className = 'w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white mb-1';
            status3.innerHTML = '<i class="fas fa-truck"></i>';
        }
        
        if (status === 'delivered') {
            status3.className = 'w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white mb-1';
            status3.innerHTML = '<i class="fas fa-check"></i>';
            showNotification('üéâ Order delivered! Thank you!', 'success');
        }
    }
    
    // Remove individual item from cart
    function removeItemFromCart(id) {
        const product = getProduct(id);
        const confirmRemove = confirm(`Remove ${product.name} from cart?`);
        
        if (confirmRemove) {
            delete cart[id]; // Remove the item
            const cartToStore = {};
            Object.keys(cart).forEach(key => cartToStore[key] = cart[key].qty);
            localStorage.setItem('cart', JSON.stringify(cartToStore));
            updateMiniCart();

            // If cart is now empty, go back to home screen
            if (Object.keys(cart).length === 0) {
                showNotification('üõí Cart is now empty. Returning home.', 'info');
                setTimeout(() => showCurrentView('home'), 1500);
            }

            showNotification(`${product.name} removed from cart`, 'warning');
        }
    }
    
    // Clear all items from cart
    function clearAllCart() {
        if (Object.keys(cart).length === 0) {
            showNotification('Cart is already empty!', 'warning');
            return;
        }
        
        const confirmClear = confirm('Remove all items from cart?');
        
        if (confirmClear) {
            cart = {};
            localStorage.removeItem('cart');
            updateMiniCart();
            renderCart();
            showNotification('Cart cleared successfully!', 'info');
            // Go back to home screen after clearing cart
            setTimeout(() => showCurrentView('home'), 1500);
        }
    }
    

    
    // ===== NEW UX FEATURES =====
    

    

    

    

    

    

    
    // Modern Notification system
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        
        // Adjust notification position for small screens
        const topPosition = deviceInfo.screenWidth <= 320 ? 'top-16' : 'top-24';
        
        // Different styles for different message types
        const styles = {
            success: 'bg-gradient-to-r from-green-500 to-green-600 text-white',
            error: 'bg-gradient-to-r from-red-500 to-red-600 text-white',
            warning: 'bg-gradient-to-r from-yellow-500 to-orange-500 text-white',
            info: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white'
        };
        
        // Get icon for message type
        const icons = {
            success: '‚úì',
            error: '‚úó',
            warning: '‚ö†',
            info: '‚Ñπ'
        };
        
        notification.className = `fixed ${topPosition} left-1/2 transform -translate-x-1/2 ${styles[type]} px-4 sm:px-6 py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-2xl z-50 text-xs sm:text-sm font-medium flex items-center gap-2 sm:gap-3 max-w-xs sm:max-w-sm mx-2 sm:mx-4 backdrop-blur-sm border border-white border-opacity-20 transition-all duration-300 ease-out`;
        
        notification.innerHTML = `
            <div class="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center font-bold">
                ${icons[type]}
            </div>
            <span class="flex-1">${message}</span>
            <button onclick="this.parentElement.remove()" class="w-5 h-5 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-colors">
                √ó
            </button>
        `;
        
        // Add entrance animation
        notification.style.transform = 'translate(-50%, -20px)';
        notification.style.opacity = '0';
        
        document.body.appendChild(notification);
        
        // Animate in
        setTimeout(() => {
            notification.style.transform = 'translate(-50%, 0)';
            notification.style.opacity = '1';
        }, 10);
        
        // Auto remove after 4 seconds
        setTimeout(() => {
            if (notification.parentElement) {
                notification.style.transform = 'translate(-50%, -20px)';
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }
        }, 4000);
    }
    

    
    // Smart Floating Header
    let lastScrollTop = 0;
    let isScrolling = false;
    
    function initSmartHeader() {
        const header = document.getElementById('floatingHeader');
        let ticking = false;
        
        function updateHeader() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                // Scrolling down - hide header
                header.style.transform = 'translateY(-100%)';
            } else {
                // Scrolling up - show header
                header.style.transform = 'translateY(0)';
            }
            
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
            ticking = false;
        }
        
        function requestTick() {
            if (!ticking) {
                requestAnimationFrame(updateHeader);
                ticking = true;
            }
        }
        
        window.addEventListener('scroll', requestTick);
    }
    
    // Profile Functions
    function showProfile() {
        const name = localStorage.getItem('custName') || 'Not Set';
        const phone = localStorage.getItem('custPhone') || 'Not Set';
        const address = localStorage.getItem('custAddress') || 'Not Set';
        const totalOrders = orderHistory.length;
        
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-gradient-to-br from-white to-gray-50 rounded-3xl w-full max-w-md shadow-2xl overflow-hidden">
                <!-- Modern Header -->
                <div class="bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 p-6 text-white relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="absolute top-4 right-4 z-10">
                        <button onclick="this.parentElement.parentElement.parentElement.parentElement.remove()" class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition">
                            <i class="fas fa-times text-sm"></i>
                        </button>
                    </div>
                    <div class="relative z-10 text-center">
                        <div class="w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3 backdrop-blur-sm border border-white border-opacity-30">
                            <i class="fas fa-user text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold">${name}</h3>
                        <p class="text-green-100 text-sm">${phone}</p>
                    </div>
                </div>
                
                <!-- Content -->
                <div class="p-6">
                    <!-- Profile Info Card -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-2xl mb-6 border border-blue-200/50">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-map-marker-alt text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-blue-800 text-sm">Delivery Address</h4>
                                <p class="text-blue-700 text-xs leading-tight">${address}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-shopping-bag text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-green-800 text-sm">Order History</h4>
                                <p class="text-green-700 text-xs">${totalOrders} orders completed</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button onclick="showMyOrders()" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-history text-lg"></i>
                                <span class="font-semibold">My Orders</span>
                            </div>
                            <div class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm font-bold">${totalOrders}</div>
                        </button>
                        <button onclick="editProfileAndReturn()" class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-2xl hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center gap-3">
                            <i class="fas fa-edit text-lg"></i>
                            <span class="font-semibold">Edit Profile</span>
                        </button>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    function showMyOrders() {
        document.querySelector('.fixed.inset-0').remove();
        
        if (orderHistory.length === 0) {
            showNotification('No orders yet!', 'info');
            return;
        }
        
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-white rounded-xl w-full max-w-md p-5 max-h-96 overflow-y-auto">
                <div class="flex items-center justify-between mb-4">
                    <button onclick="this.parentElement.parentElement.parentElement.remove(); showProfile();" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors">
                        <i class="fas fa-arrow-left text-gray-600 text-sm"></i>
                    </button>
                    <h3 class="text-lg font-bold flex items-center gap-2">
                        <i class="fas fa-history text-blue-600"></i> My Orders
                    </h3>
                    <div class="w-8 h-8"></div>
                </div>
                <div class="space-y-3">
                    ${orderHistory.slice().reverse().map((order, index) => {
                        const orderDate = new Date(order.date);
                        const dateStr = orderDate.toLocaleDateString('en-IN');
                        const timeStr = orderDate.toLocaleTimeString('en-IN', {hour: '2-digit', minute: '2-digit'});
                        const itemCount = Object.keys(order.items).length;
                        const orderId = order.id || `Order #${orderHistory.length - index}`;
                        const status = localStorage.getItem(`order_${orderId}_status`) || 'received';
                        const statusEmojis = {
                            received: 'üì¶',
                            preparing: 'üë®üç≥',
                            delivering: 'üöö',
                            delivered: '‚úÖ'
                        };
                        
                        // Order status tracker for each order
                        const statusTracker = `
                            <div class="bg-orange-50 p-3 rounded-lg border border-orange-200 mt-3">
                                <h4 class="font-bold mb-2 text-orange-800 text-xs flex items-center gap-1">
                                    <i class="fas fa-truck"></i> Order Status
                                </h4>
                                <div class="flex items-center justify-between text-xs">
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 h-6 ${status === 'received' || status === 'preparing' || status === 'delivering' || status === 'delivered' ? 'bg-green-500' : 'bg-gray-300'} rounded-full flex items-center justify-center text-white mb-1">
                                            <i class="fas fa-check text-xs"></i>
                                        </div>
                                        <span class="${status === 'received' || status === 'preparing' || status === 'delivering' || status === 'delivered' ? 'text-green-600' : 'text-gray-500'} font-bold text-xs">Received</span>
                                    </div>
                                    <div class="flex-1 h-1 ${status === 'preparing' || status === 'delivering' || status === 'delivered' ? 'bg-green-300' : 'bg-gray-300'} mx-1"></div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 h-6 ${status === 'preparing' || status === 'delivering' || status === 'delivered' ? 'bg-green-500' : status === 'received' ? 'bg-yellow-500' : 'bg-gray-300'} rounded-full flex items-center justify-center text-white mb-1">
                                            <i class="fas ${status === 'preparing' || status === 'delivering' || status === 'delivered' ? 'fa-check' : 'fa-clock'} text-xs"></i>
                                        </div>
                                        <span class="${status === 'preparing' || status === 'delivering' || status === 'delivered' ? 'text-green-600' : status === 'received' ? 'text-yellow-600' : 'text-gray-500'} font-bold text-xs">Preparing</span>
                                    </div>
                                    <div class="flex-1 h-1 ${status === 'delivering' || status === 'delivered' ? 'bg-green-300' : 'bg-gray-300'} mx-1"></div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 h-6 ${status === 'delivered' ? 'bg-green-500' : status === 'delivering' ? 'bg-yellow-500' : 'bg-gray-300'} rounded-full flex items-center justify-center text-white mb-1">
                                            <i class="fas ${status === 'delivered' ? 'fa-check' : 'fa-truck'} text-xs"></i>
                                        </div>
                                        <span class="${status === 'delivered' ? 'text-green-600' : status === 'delivering' ? 'text-yellow-600' : 'text-gray-500'} font-bold text-xs">Delivered</span>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        return `
                            <div class="bg-gray-50 p-3 rounded-lg border">
                                <div class="flex justify-between items-start mb-2">
                                    <div class="font-bold text-gray-800">${orderId}</div>
                                    <div class="text-xs text-gray-500">${dateStr} ${timeStr}</div>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm text-gray-600">${itemCount} items</span>
                                    <span class="font-bold text-green-600">‚Çπ${order.total.toFixed(2)}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center gap-1 text-xs">
                                        <span>${statusEmojis[status]}</span>
                                        <span class="capitalize text-gray-600">${status}</span>
                                    </div>
                                    <button onclick="reorderSpecific(${orderHistory.length - 1 - index})" class="bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700">
                                        Reorder
                                    </button>
                                </div>
                                ${statusTracker}
                            </div>
                        `;
                    }).join('')}
                </div>
                <button onclick="this.parentElement.parentElement.remove()" class="w-full mt-4 bg-gray-200 text-gray-700 py-2 rounded-lg">Close</button>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    function editProfile() {
        document.querySelector('.fixed.inset-0').remove();
        
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-white rounded-xl w-full max-w-md p-6">
                <h3 class="text-xl font-bold mb-4 text-center">Edit Profile</h3>
                <div class="space-y-4">
                    <input type="text" id="editName" placeholder="Your Full Name" value="${localStorage.getItem('custName') || ''}" class="w-full border p-3 rounded-lg focus:outline-none focus:border-green-500">
                    <input type="tel" id="editPhone" placeholder="Phone Number" value="${localStorage.getItem('custPhone') || ''}" class="w-full border p-3 rounded-lg focus:outline-none focus:border-green-500">
                    <textarea id="editAddress" placeholder="Full Address" rows="3" class="w-full border p-3 rounded-lg focus:outline-none focus:border-green-500">${localStorage.getItem('custAddress') || ''}</textarea>
                </div>
                <div class="flex gap-3 mt-6">
                    <button onclick="this.parentElement.parentElement.remove()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg">Cancel</button>
                    <button onclick="saveProfileChanges()" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700">Save Changes</button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    function editProfileAndReturn() {
        document.querySelector('.fixed.inset-0').remove();
        
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl w-full max-w-md p-6 shadow-2xl">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-user-edit text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Edit Profile</h3>
                    <p class="text-gray-600 text-sm">Update your information</p>
                </div>
                <div class="space-y-4">
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="editName" placeholder="Your Full Name" value="${localStorage.getItem('custName') || ''}" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all">
                    </div>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-phone text-gray-400"></i>
                        </div>
                        <input type="tel" id="editPhone" placeholder="Phone Number" value="${localStorage.getItem('custPhone') || ''}" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all">
                    </div>
                    <div class="relative">
                        <div class="absolute top-3 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-map-marker-alt text-gray-400"></i>
                        </div>
                        <textarea id="editAddress" placeholder="Full Address" rows="3" class="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all resize-none">${localStorage.getItem('custAddress') || ''}</textarea>
                    </div>
                </div>
                <div class="flex gap-3 mt-6">
                    <button onclick="this.parentElement.parentElement.remove()" class="flex-1 bg-gray-100 text-gray-600 py-3 rounded-xl font-medium hover:bg-gray-200 transition-colors">Cancel</button>
                    <button onclick="saveProfileChangesAndReturnHome()" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-xl font-bold hover:from-green-600 hover:to-green-700 transition-all shadow-lg">Save & Continue</button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    function getCurrentLocation() {
        const statusEl = document.getElementById('locationStatus');
        const addressEl = document.getElementById('editAddress');
        
        statusEl.classList.remove('hide');
        statusEl.innerText = 'üìç Getting your location...';
        statusEl.className = 'text-sm text-blue-500';
        
        if (!navigator.geolocation) {
            statusEl.innerText = '‚ùå Location not supported by your browser';
            statusEl.className = 'text-sm text-red-500';
            return;
        }
        
        const options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
        };
        
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                
                // Update stored location
                localStorage.setItem('userLat', lat.toString());
                localStorage.setItem('userLng', lng.toString());
                
                // Try to get readable address using reverse geocoding
                fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`)
                    .then(response => response.json())
                    .then(data => {
                        const address = `${data.locality || ''}, ${data.city || ''}, ${data.principalSubdivision || ''}, ${data.countryName || ''}`;
                        addressEl.value = address.replace(/^,\s*|,\s*$/g, '').replace(/,\s*,/g, ',');
                        statusEl.innerText = '‚úÖ Location detected successfully!';
                        statusEl.className = 'text-sm text-green-500';
                    })
                    .catch(() => {
                        // Fallback to coordinates if reverse geocoding fails
                        addressEl.value = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;
                        statusEl.innerText = '‚úÖ Location coordinates added';
                        statusEl.className = 'text-sm text-green-500';
                    });
            },
            (error) => {
                let errorMessage = '‚ùå Unable to get location: ';
                switch(error.code) {
                    case error.PERMISSION_DENIED:
                        errorMessage += 'Permission denied';
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errorMessage += 'Location unavailable';
                        break;
                    case error.TIMEOUT:
                        errorMessage += 'Request timed out';
                        break;
                }
                statusEl.innerText = errorMessage;
                statusEl.className = 'text-sm text-red-500';
            },
            options
        );
    }
    
    function saveProfileChanges() {
        const name = document.getElementById('editName').value.trim();
        const phone = document.getElementById('editPhone').value.trim();
        const address = document.getElementById('editAddress').value.trim();
        
        if (!name || !phone || !address || phone.length < 10) {
            showNotification('Please fill all fields correctly!', 'error');
            return;
        }
        
        localStorage.setItem('custName', name);
        localStorage.setItem('custPhone', phone);
        localStorage.setItem('custAddress', address);
        
        // Update greeting with new name
        const firstName = name.split(' ')[0];
        document.getElementById('welcomeGreeting').textContent = `${getTimeBasedGreeting()}, ${firstName}! Welcome back to Nekta!`;
        
        // Close modal
        document.querySelector('.fixed.inset-0').remove();
        
        // Hide all views first
        const views = ['details', 'home', 'about', 'contact', 'cart'];
        views.forEach(view => {
            const viewEl = document.getElementById(`view-${view}`);
            if (viewEl) viewEl.classList.add('hide');
        });
        
        // Show confirmation page
        document.getElementById('view-confirmation').classList.remove('hide');
        
        showNotification('Profile updated successfully!', 'success');
    }
    
    function saveProfileChangesAndReturnHome() {
        const name = document.getElementById('editName').value.trim();
        const phone = document.getElementById('editPhone').value.trim();
        const address = document.getElementById('editAddress').value.trim();
        
        if (!name || !phone || !address || phone.length < 10) {
            showNotification('Please fill all fields correctly!', 'error');
            return;
        }
        
        localStorage.setItem('custName', name);
        localStorage.setItem('custPhone', phone);
        localStorage.setItem('custAddress', address);
        
        // Update greeting with new name
        const firstName = name.split(' ')[0];
        const welcomeEl = document.getElementById('welcomeGreeting');
        if (welcomeEl) {
            welcomeEl.textContent = `${getTimeBasedGreeting()}, ${firstName}! Welcome back to Nekta!`;
        }
        
        // Close modal
        document.querySelector('.fixed.inset-0').remove();
        
        // Show success notification
        showNotification('‚úÖ Profile updated successfully!', 'success');
        
        // Return to home page after a short delay
        setTimeout(() => {
            showCurrentView('home');
            showNotification('üè† Welcome back! Continue shopping...', 'info');
        }, 1000);
    }
    
    function detectHeaderLocation() {
        showNotification('üìç Detecting your location...', 'info');
        
        if (!navigator.geolocation) {
            showNotification('‚ùå Location not supported by your browser', 'error');
            return;
        }
        
        const options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
        };
        
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                
                // Update stored location
                localStorage.setItem('userLat', lat.toString());
                localStorage.setItem('userLng', lng.toString());
                localStorage.setItem('locationPermissionGranted', 'true');
                
                // Try to get readable address using reverse geocoding
                fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`)
                    .then(response => response.json())
                    .then(data => {
                        const city = data.city || data.locality || 'Unknown';
                        const state = data.principalSubdivision || '';
                        const country = data.countryName || '';
                        
                        // Update header display
                        document.getElementById('headerLocationName').innerText = city;
                        document.getElementById('headerLocationDetails').innerText = `${state}, ${country}`;
                        
                        // Update stored address
                        const fullAddress = `${data.locality || ''}, ${city}, ${state}, ${country}`;
                        const cleanAddress = fullAddress.replace(/^,\s*|,\s*$/g, '').replace(/,\s*,/g, ',');
                        localStorage.setItem('custAddress', cleanAddress);
                        
                        showNotification('‚úÖ Location detected successfully!', 'success');
                    })
                    .catch(() => {
                        // Fallback to coordinates if reverse geocoding fails
                        document.getElementById('headerLocationName').innerText = 'Location Found';
                        document.getElementById('headerLocationDetails').innerText = `${lat.toFixed(4)}, ${lng.toFixed(4)}`;
                        
                        const coordAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;
                        localStorage.setItem('custAddress', coordAddress);
                        showNotification('‚úÖ Location coordinates saved', 'success');
                    });
            },
            (error) => {
                let errorMessage = '‚ùå Unable to detect location: ';
                switch(error.code) {
                    case error.PERMISSION_DENIED:
                        errorMessage += 'Permission denied';
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errorMessage += 'Location unavailable';
                        break;
                    case error.TIMEOUT:
                        errorMessage += 'Request timed out';
                        break;
                }
                showNotification(errorMessage, 'error');
            },
            options
        );
    }
    
    // Location will be requested only during checkout
    function requestLocationForDelivery() {
        return new Promise((resolve, reject) => {
            if (!navigator.geolocation) {
                reject('Location not supported');
                return;
            }
            
            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            };
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    
                    localStorage.setItem('userLat', lat.toString());
                    localStorage.setItem('userLng', lng.toString());
                    localStorage.setItem('locationPermissionGranted', 'true');
                    
                    resolve({ lat, lng });
                },
                (error) => {
                    reject(error);
                },
                options
            );
        });
    }
    
    function updateDeliveryLocation() {
        showNotification('üìç Getting your location...', 'info');
        
        if (!navigator.geolocation) {
            showNotification('‚ùå Location not supported by your browser', 'error');
            return;
        }
        
        const options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
        };
        
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                
                // Update stored location
                localStorage.setItem('userLat', lat.toString());
                localStorage.setItem('userLng', lng.toString());
                
                // Check delivery zone and nearby stores
                checkDeliveryZone(lat, lng);
                findNearbyStores(lat, lng);
                
                // Try to get readable address using reverse geocoding
                fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`)
                    .then(response => response.json())
                    .then(data => {
                        const address = `${data.locality || ''}, ${data.city || ''}, ${data.principalSubdivision || ''}, ${data.countryName || ''}`;
                        const cleanAddress = address.replace(/^,\s*|,\s*$/g, '').replace(/,\s*,/g, ',');
                        
                        // Update stored address
                        localStorage.setItem('custAddress', cleanAddress);
                        
                        // Update cart display
                        document.getElementById('cartCustAddress').innerText = cleanAddress;
                        
                        showNotification('‚úÖ Delivery address updated!', 'success');
                    })
                    .catch(() => {
                        // Fallback to coordinates if reverse geocoding fails
                        const coordAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;
                        localStorage.setItem('custAddress', coordAddress);
                        document.getElementById('cartCustAddress').innerText = coordAddress;
                        showNotification('‚úÖ Location coordinates updated', 'success');
                    });
            },
            (error) => {
                let errorMessage = '‚ùå Unable to get location: ';
                switch(error.code) {
                    case error.PERMISSION_DENIED:
                        errorMessage += 'Permission denied';
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errorMessage += 'Location unavailable';
                        break;
                    case error.TIMEOUT:
                        errorMessage += 'Request timed out';
                        break;
                }
                showNotification(errorMessage, 'error');
            },
            options
        );
    }

    // Zepto/Blinkit style location features
    function checkDeliveryZone(lat, lng) {
        const deliveryZones = [
            { name: 'Kothagudem Center', lat: 17.5581, lng: 80.6185, radius: 5, deliveryTime: '10-15 min' },
            { name: 'Palvancha', lat: 17.5947, lng: 80.6736, radius: 8, deliveryTime: '15-25 min' },
            { name: 'Yellandu', lat: 17.6047, lng: 80.3314, radius: 10, deliveryTime: '20-30 min' }
        ];
        
        let nearestZone = null;
        let minDistance = Infinity;
        
        deliveryZones.forEach(zone => {
            const distance = calculateDistance(lat, lng, zone.lat, zone.lng);
            if (distance <= zone.radius && distance < minDistance) {
                minDistance = distance;
                nearestZone = zone;
            }
        });
        
        if (nearestZone) {
            localStorage.setItem('deliveryZone', JSON.stringify(nearestZone));
            showNotification(`üöö Delivery available in ${nearestZone.deliveryTime}`, 'success');
            updateDeliveryInfo(nearestZone);
        } else {
            showNotification('‚ö†Ô∏è Outside delivery zone. Contact us for special delivery', 'warning');
        }
    }
    

    
    function updateDeliveryInfo(zone) {
        const deliveryBanner = document.createElement('div');
        deliveryBanner.id = 'delivery-banner';
        deliveryBanner.className = 'bg-green-100 border border-green-300 p-3 mx-4 mt-2 rounded-lg flex items-center gap-2';
        deliveryBanner.innerHTML = `
            <i class="fas fa-shipping-fast text-green-600"></i>
            <span class="text-green-800 font-medium text-sm">Delivering to ${zone.name} in ${zone.deliveryTime}</span>
        `;
        
        const existingBanner = document.getElementById('delivery-banner');
        if (existingBanner) existingBanner.remove();
        
        const searchBox = document.querySelector('.px-4.py-3.bg-white.border-b');
        if (searchBox) searchBox.after(deliveryBanner);
    }
    
    function showNearestStore(store) {
        if (store.distance < 2) {
            showNotification(`üìç Nearest store: ${store.name} (${store.distance.toFixed(1)}km away)`, 'info');
        }
    }
    

    

    
    // Initialize UX Features
    function initializeUXFeatures() {
        initSlider();
        initSmartHeader();
        handleOrientationChange();
        optimizeForDevice();
        
        // Hide search suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#searchInput') && !e.target.closest('#searchSuggestions')) {
                const suggestions = document.getElementById('searchSuggestions');
                if (suggestions) {
                    suggestions.classList.add('hide');
                }
            }
        });
        
        // Handle window resize for responsive adjustments
        window.addEventListener('resize', debounce(handleResize, 250));
        window.addEventListener('orientationchange', handleOrientationChange);
    }
    
    // Debounce function for performance
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
    
    // Handle window resize
    function handleResize() {
        deviceInfo.screenWidth = window.innerWidth;
        deviceInfo.screenHeight = window.innerHeight;
        
        // Update device classes
        document.body.classList.remove('is-small-screen');
        if (deviceInfo.screenWidth <= 320) {
            document.body.classList.add('is-small-screen');
        }
        
        // Adjust grid layout if needed
        const productGrid = document.getElementById('product-grid');
        if (productGrid && deviceInfo.screenWidth <= 320) {
            productGrid.className = productGrid.className.replace('grid-cols-3', 'grid-cols-2');
        }
    }
    
    // Handle orientation change
    function handleOrientationChange() {
        setTimeout(() => {
            // Force recalculation after orientation change
            handleResize();
            
            // Scroll to top to avoid layout issues
            window.scrollTo(0, 0);
            
            // Update viewport height for mobile browsers
            if (deviceInfo.isMobile) {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
        }, 100);
    }
    
    // Device-specific optimizations
    function optimizeForDevice() {
        // iOS specific optimizations
        if (deviceInfo.isIOS) {
            // Prevent zoom on input focus
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                if (input.style.fontSize === '' || parseFloat(input.style.fontSize) < 16) {
                    input.style.fontSize = '16px';
                }
            });
            
            // Handle safe area insets
            document.documentElement.style.setProperty('--safe-area-inset-top', 'env(safe-area-inset-top)');
            document.documentElement.style.setProperty('--safe-area-inset-bottom', 'env(safe-area-inset-bottom)');
        }
        
        // Android specific optimizations
        if (deviceInfo.isAndroid) {
            // Improve touch responsiveness
            document.body.style.touchAction = 'manipulation';
        }
        
        // Small screen optimizations
        if (deviceInfo.screenWidth <= 320) {
            // Reduce padding and margins for very small screens
            const elements = document.querySelectorAll('.p-4, .p-6, .px-4, .py-4');
            elements.forEach(el => {
                el.classList.add('!p-2');
            });
        }
    }
    
    // Modern Slider Functionality
    let currentSlide = 0;
    const totalSlides = 3;
    let sliderInterval;
    
    function initSlider() {
        const container = document.getElementById('sliderContainer');
        if (!container) return;
        
        // Auto-play slider
        sliderInterval = setInterval(() => {
            nextSlide();
        }, 4000);
        
        // Touch/swipe support
        let startX = 0;
        let isDragging = false;
        
        container.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            isDragging = true;
            clearInterval(sliderInterval);
        });
        
        container.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
        });
        
        container.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            const endX = e.changedTouches[0].clientX;
            const diff = startX - endX;
            
            if (Math.abs(diff) > 50) {
                if (diff > 0) nextSlide();
                else prevSlide();
            }
            
            isDragging = false;
            // Restart auto-play
            sliderInterval = setInterval(() => {
                nextSlide();
            }, 4000);
        });
    }
    
    function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateSlider();
    }
    
    function prevSlide() {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateSlider();
    }
    
    function updateSlider() {
        const container = document.getElementById('sliderContainer');
        if (!container) return;
        
        container.style.transform = `translateX(-${currentSlide * 100}%)`;
        
        // Update dots
        for (let i = 0; i < totalSlides; i++) {
            const dot = document.getElementById(`dot${i}`);
            if (dot) {
                if (i === currentSlide) {
                    dot.className = 'w-2 h-2 bg-green-600 rounded-full transition-all duration-300';
                } else {
                    dot.className = 'w-2 h-2 bg-gray-300 rounded-full transition-all duration-300';
                }
            }
        }
    }
    
    function showStoreSelector() {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
        modal.innerHTML = `
            <div class="bg-white rounded-xl w-full max-w-md p-6">
                <h3 class="text-xl font-bold mb-4 text-center flex items-center gap-2">
                    <i class="fas fa-shipping-fast text-green-600"></i> Delivery Options
                </h3>
                <div class="space-y-3">
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-bold text-green-800">Within 2km</h4>
                                <p class="text-sm text-green-600">30-40 minutes</p>
                            </div>
                            <div class="text-green-600 font-bold">‚Çπ20</div>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-bold text-blue-800">Above 2km</h4>
                                <p class="text-sm text-blue-600">45-60 minutes</p>
                            </div>
                            <div class="text-blue-600 font-bold">‚Çπ25-35</div>
                        </div>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-bold text-orange-800">Scheduled Delivery</h4>
                                <p class="text-sm text-orange-600">Choose your time slot</p>
                            </div>
                            <div class="text-orange-600 font-bold">‚Çπ20-40</div>
                        </div>
                    </div>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" class="w-full mt-6 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition">
                    Got it!
                </button>
            </div>
        `;
        document.body.appendChild(modal);
    }

</script>
</body>
</html>